import{a as W}from"./chunk-K6ZU6JQY.js";import"./chunk-KJIKDUO6.js";import{a as B}from"./chunk-4Y7IPZDV.js";import"./chunk-3VCHQSRR.js";import{Ab as i,Ac as $,Bb as s,Bc as A,Hb as k,Ib as v,Ic as z,Jb as m,Rb as _,Sa as V,Sb as h,Ta as r,Tb as o,Ub as g,Vb as p,bb as Q,da as I,gb as C,ja as y,ka as x,qb as D,ta as b,yb as d,zb as n}from"./chunk-CM3JQ4U2.js";function G(l,e){if(l&1&&(n(0,"div",31)(1,"div",23)(2,"div",32)(3,"div",33)(4,"strong"),o(5,"Nome:"),i(),n(6,"span"),o(7),i()()(),n(8,"div",32)(9,"div",33)(10,"strong"),o(11,"Subdom\xEDnio:"),i(),n(12,"span",34),o(13),i()()(),n(14,"div",32)(15,"div",33)(16,"strong"),o(17,"Status:"),i(),n(18,"span"),o(19),i()()()()()),l&2){let t,a,c=m();r(7),g((t=c.currentCompany())==null?null:t.name),r(6),g((a=c.currentCompany())==null?null:a.subdomain),r(5),h(c.getStatusClass()),r(),g(c.getStatusText())}}function H(l,e){if(l&1){let t=k();n(0,"button",50),v("click",function(){y(t);let c=m().$implicit,u=m(2);return x(u.openLink(c.url))}),s(1,"i",51),i()}}function J(l,e){if(l&1){let t=k();n(0,"div",38)(1,"div",39)(2,"div",40)(3,"div",41),s(4,"i"),i(),n(5,"div",42)(6,"h6",43),o(7),i(),n(8,"p",44),o(9),i(),n(10,"div",45)(11,"small",46),o(12),i()()(),n(13,"div",47)(14,"button",48),v("click",function(){let c=y(t).$implicit,u=m(2);return x(u.copyToClipboard(c.url))}),s(15,"i",20),i(),C(16,H,2,0,"button",49),i()()()()}if(l&2){let t=e.$implicit;r(4),h(t.icon),r(3),g(t.name),r(2),g(t.description),r(3),g(t.url),r(2),d("disabled",!t.copyable),r(2),d("ngIf",t.category!=="api")}}function K(l,e){if(l&1&&(n(0,"div",35)(1,"h5",36),s(2,"i"),o(3),i(),n(4,"div",23),C(5,J,17,7,"div",37),i()()),l&2){let t=e.$implicit,a=m();r(2),h(a.getCategoryIcon(t)),r(),p(" ",a.getCategoryName(t)," "),r(2),d("ngForOf",a.getLinksByCategory(t))}}function X(l,e){if(l&1){let t=k();n(0,"div",52)(1,"h5"),s(2,"i",53),o(3," QR Code"),i(),n(4,"div",23)(5,"div",38)(6,"div",54)(7,"div",55),s(8,"img",56),i(),n(9,"p",57),o(10," QR Code para acesso r\xE1pido ao sistema "),i(),n(11,"button",19),v("click",function(){y(t);let c=m();return x(c.downloadQRCode())}),s(12,"i",58),o(13," Baixar QR Code "),i()()(),n(14,"div",38)(15,"div",59)(16,"h6"),o(17,"Como usar:"),i(),n(18,"ul",60)(19,"li"),o(20,"Escaneie com qualquer leitor de QR Code"),i(),n(21,"li"),o(22,"Ser\xE1 redirecionado para o sistema da empresa"),i(),n(23,"li"),o(24,"Ideal para cart\xF5es de visita e materiais impressos"),i(),n(25,"li"),o(26,"Funciona em qualquer dispositivo m\xF3vel"),i()()()()()()}if(l&2){let t=m();r(8),d("src",t.getQRCodeUrl(t.getMainUrl()),V)}}function Y(l,e){if(l&1&&(n(0,"div",61),s(1,"i",62),o(2),i()),l&2){let t=m();r(2),p(" ",t.successMessage()," ")}}function Z(l,e){if(l&1&&(n(0,"div",63),s(1,"i",64),o(2),i()),l&2){let t=m();r(2),p(" ",t.errorMessage()," ")}}var j=class l{subdomainService=I(B);apiService=I(W);currentCompany=b(null);successMessage=b(null);errorMessage=b(null);showQRCode=b(!0);ngOnInit(){this.currentCompany.set(this.subdomainService.getCurrentCompany())}getCategories(){return["app","form","api","webhook"]}getCategoryName(e){return{app:"Sistema Web",form:"Formul\xE1rios",api:"API & Integra\xE7\xE3o",webhook:"Webhooks"}[e]||e}getCategoryIcon(e){return{app:"fas fa-desktop",form:"fas fa-wpforms",api:"fas fa-code",webhook:"fas fa-webhook"}[e]||"fas fa-link"}getLinksByCategory(e){let t=this.currentCompany();if(!t)return[];let a=this.subdomainService.getCompanyUrl(t.subdomain),c=this.subdomainService.getApiUrl();return[{name:"Dashboard Principal",url:`${a}/dashboard`,description:"Acesso ao painel principal do sistema",icon:"fas fa-tachometer-alt",category:"app",copyable:!0},{name:"Login",url:`${a}/login`,description:"P\xE1gina de login da empresa",icon:"fas fa-sign-in-alt",category:"app",copyable:!0},{name:"Formul\xE1rio P\xFAblico",url:`${a}/form`,description:"Formul\xE1rio p\xFAblico para captura de leads",icon:"fas fa-wpforms",category:"form",copyable:!0},{name:"Endpoint Lead Intake",url:this.getLeadIntakeUrl(),description:"Endpoint para envio de leads via API",icon:"fas fa-server",category:"api",copyable:!0},{name:"Token de Autentica\xE7\xE3o",url:t.apiConfig?.token||"Token n\xE3o configurado",description:"Token Bearer para autentica\xE7\xE3o na API",icon:"fas fa-key",category:"api",copyable:!0},{name:"URL de Webhook",url:t.apiConfig?.webhookUrl||"N\xE3o configurado",description:"URL para receber notifica\xE7\xF5es autom\xE1ticas",icon:"fas fa-webhook",category:"webhook",copyable:!!t.apiConfig?.webhookUrl}].filter(f=>f.category===e)}getLeadIntakeUrl(){try{return this.apiService.getLeadIntakeUrl()}catch{return"Erro: empresa n\xE3o configurada"}}getMainUrl(){let e=this.currentCompany();return e?this.subdomainService.getCompanyUrl(e.subdomain):""}getFormUrl(){let e=this.currentCompany();return e?`${this.subdomainService.getCompanyUrl(e.subdomain)}/form`:""}getQRCodeUrl(e){return`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(e)}`}getIframeCode(){return`<iframe src="${this.getFormUrl()}" width="100%" height="600" frameborder="0"></iframe>`}downloadQRCode(){let e=this.getQRCodeUrl(this.getMainUrl()),t=document.createElement("a");t.href=e,t.download=`qrcode-${this.currentCompany()?.subdomain}.png`,t.target="_blank",document.body.appendChild(t),t.click(),document.body.removeChild(t),this.showSuccess("Download do QR Code iniciado!")}openLink(e){e&&e!=="N\xE3o configurado"&&e!=="Token n\xE3o configurado"&&window.open(e,"_blank")}copyToClipboard(e){if(!e||e==="N\xE3o configurado"||e==="Token n\xE3o configurado"){this.showError("Nada para copiar.");return}navigator.clipboard.writeText(e).then(()=>{this.showSuccess("Copiado para \xE1rea de transfer\xEAncia!")}).catch(()=>{this.showError("Erro ao copiar para \xE1rea de transfer\xEAncia.")})}getStatusClass(){let e=this.currentCompany();if(!e)return"badge bg-secondary";switch(e.status){case"active":return"badge bg-success";case"inactive":return"badge bg-warning";case"suspended":return"badge bg-danger";default:return"badge bg-secondary"}}getStatusText(){let e=this.currentCompany();if(!e)return"Desconhecido";switch(e.status){case"active":return"Ativo";case"inactive":return"Inativo";case"suspended":return"Suspenso";default:return"Desconhecido"}}hasValidSmtp(){let e=this.currentCompany();return!!(e?.smtpConfig?.host&&e?.smtpConfig?.user&&e?.smtpConfig?.password)}showSuccess(e){this.successMessage.set(e),this.errorMessage.set(null),setTimeout(()=>this.successMessage.set(null),3e3)}showError(e){this.errorMessage.set(e),this.successMessage.set(null),setTimeout(()=>this.errorMessage.set(null),5e3)}static \u0275fac=function(t){return new(t||l)};static \u0275cmp=Q({type:l,selectors:[["app-company-links"]],decls:69,vars:45,consts:[[1,"company-links-container"],[1,"card"],[1,"card-header"],[1,"fas","fa-link"],[1,"text-muted"],[1,"card-body"],["class","company-info mb-4",4,"ngIf"],["class","links-section",4,"ngFor","ngForOf"],["class","qr-section mt-4",4,"ngIf"],[1,"integration-guide","mt-4"],[1,"fas","fa-book"],[1,"accordion"],[1,"accordion-item"],[1,"accordion-header"],["type","button",1,"accordion-button","collapsed"],[1,"fas","fa-globe","me-2"],["id","website-integration",1,"accordion-collapse","collapse"],[1,"accordion-body"],[1,"bg-light","p-3","rounded","small"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"fas","fa-copy"],[1,"card","mt-3"],[1,"fas","fa-cogs"],[1,"row"],[1,"col-md-3","text-center"],[1,"resource-status"],[1,"fas","fa-2x","mb-2"],[1,"fas","fa-crown","fa-2x","mb-2"],[1,"text-muted","text-capitalize"],["class","alert alert-success mt-3",4,"ngIf"],["class","alert alert-danger mt-3",4,"ngIf"],[1,"company-info","mb-4"],[1,"col-md-4"],[1,"info-item"],[1,"badge","bg-primary"],[1,"links-section"],[1,"category-title"],["class","col-md-6",4,"ngFor","ngForOf"],[1,"col-md-6"],[1,"link-card"],[1,"d-flex","align-items-center","gap-3"],[1,"link-icon"],[1,"link-info","flex-grow-1"],[1,"mb-1"],[1,"mb-1","small","text-muted"],[1,"link-url"],[1,"text-break"],[1,"link-actions"],[1,"btn","btn-sm","btn-outline-primary","me-1",3,"click","disabled"],["class","btn btn-sm btn-outline-secondary",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"fas","fa-external-link-alt"],[1,"qr-section","mt-4"],[1,"fas","fa-qrcode"],[1,"qr-card","text-center"],[1,"qr-code","mb-3"],["alt","QR Code",1,"img-fluid",3,"src"],[1,"small","text-muted","mb-2"],[1,"fas","fa-download"],[1,"qr-info"],[1,"small"],[1,"alert","alert-success","mt-3"],[1,"fas","fa-check-circle"],[1,"alert","alert-danger","mt-3"],[1,"fas","fa-exclamation-circle"]],template:function(t,a){if(t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),s(4,"i",3),o(5," Links da Empresa"),i(),n(6,"p",4),o(7),i()(),n(8,"div",5),C(9,G,20,5,"div",6)(10,K,6,4,"div",7)(11,X,27,1,"div",8),n(12,"div",9)(13,"h5"),s(14,"i",10),o(15," Guia de Integra\xE7\xE3o"),i(),n(16,"div",11)(17,"div",12)(18,"div",13)(19,"button",14),s(20,"i",15),o(21," Integra\xE7\xE3o no Site "),i()(),n(22,"div",16)(23,"div",17)(24,"p"),o(25,"Para integrar o formul\xE1rio de leads no seu site, use o c\xF3digo:"),i(),n(26,"pre",18)(27,"code"),o(28),i()(),n(29,"button",19),v("click",function(){return a.copyToClipboard(a.getIframeCode())}),s(30,"i",20),o(31," Copiar C\xF3digo "),i()()()()()()()(),n(32,"div",21)(33,"div",2)(34,"h6"),s(35,"i",22),o(36," Status dos Recursos"),i()(),n(37,"div",5)(38,"div",23)(39,"div",24)(40,"div",25),s(41,"i",26),n(42,"h6"),o(43,"API"),i(),n(44,"small",4),o(45),i()()(),n(46,"div",24)(47,"div",25),s(48,"i",26),n(49,"h6"),o(50,"SMTP"),i(),n(51,"small",4),o(52),i()()(),n(53,"div",24)(54,"div",25),s(55,"i",26),n(56,"h6"),o(57,"Branding"),i(),n(58,"small",4),o(59),i()()(),n(60,"div",24)(61,"div",25),s(62,"i",27),n(63,"h6"),o(64,"Plano"),i(),n(65,"small",28),o(66),i()()()()()(),C(67,Y,3,1,"div",29)(68,Z,3,1,"div",30),i()),t&2){let c,u,f,S,E,w,M,P,L,U,O,T,F,R,q,N;r(7),p("Links personalizados para ",(c=a.currentCompany())==null?null:c.name),r(2),d("ngIf",a.currentCompany()),r(),d("ngForOf",a.getCategories()),r(),d("ngIf",a.showQRCode()),r(8),D("data-bs-toggle","collapse")("data-bs-target","#website-integration"),r(9),p(`<iframe 
  src="`,a.getFormUrl(),`" 
  width="100%" 
  height="600"
  frameborder="0">
</iframe>`),r(13),_("fa-check-circle",(u=a.currentCompany())==null||u.apiConfig==null?null:u.apiConfig.enabled)("fa-times-circle",!(!((f=a.currentCompany())==null||f.apiConfig==null)&&f.apiConfig.enabled))("text-success",(S=a.currentCompany())==null||S.apiConfig==null?null:S.apiConfig.enabled)("text-danger",!(!((E=a.currentCompany())==null||E.apiConfig==null)&&E.apiConfig.enabled)),r(4),p(" ",!((w=a.currentCompany())==null||w.apiConfig==null)&&w.apiConfig.enabled?"Ativa":"Inativa"," "),r(3),_("fa-check-circle",a.hasValidSmtp())("fa-times-circle",!a.hasValidSmtp())("text-success",a.hasValidSmtp())("text-danger",!a.hasValidSmtp()),r(4),p(" ",a.hasValidSmtp()?"Configurado":"N\xE3o Configurado"," "),r(3),_("fa-check-circle",!!((M=a.currentCompany())!=null&&M.logoUrl))("fa-times-circle",!((P=a.currentCompany())!=null&&P.logoUrl))("text-success",!!((L=a.currentCompany())!=null&&L.logoUrl))("text-warning",!((U=a.currentCompany())!=null&&U.logoUrl)),r(4),p(" ",(O=a.currentCompany())!=null&&O.logoUrl?"Logo Configurado":"Logo Padr\xE3o"," "),r(3),_("text-warning",((T=a.currentCompany())==null?null:T.plan)==="free")("text-info",((F=a.currentCompany())==null?null:F.plan)==="starter")("text-success",((R=a.currentCompany())==null?null:R.plan)==="professional")("text-primary",((q=a.currentCompany())==null?null:q.plan)==="enterprise"),r(4),p(" ",((N=a.currentCompany())==null?null:N.plan)||"Free"," "),r(),d("ngIf",a.successMessage()),r(),d("ngIf",a.errorMessage())}},dependencies:[z,$,A],styles:[".company-links-container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto;padding:20px}.company-info[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;padding:20px;border:1px solid #dee2e6}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.category-title[_ngcontent-%COMP%]{color:#495057;border-bottom:2px solid #007bff;padding-bottom:8px;margin-bottom:20px}.link-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #dee2e6;border-radius:8px;padding:15px;margin-bottom:15px;transition:all .3s ease}.link-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #0000001a;border-color:#007bff}.link-icon[_ngcontent-%COMP%]{width:40px;height:40px;background:#f8f9fa;border-radius:8px;display:flex;align-items:center;justify-content:center;color:#007bff;font-size:1.2rem}.link-info[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#495057;font-weight:600}.link-url[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:4px;padding:4px 8px;font-family:monospace}.qr-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #dee2e6;border-radius:8px;padding:20px}.qr-code[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:150px;border:1px solid #dee2e6;border-radius:4px}.qr-info[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;padding:20px;height:100%}.resource-status[_ngcontent-%COMP%]{padding:15px;border-radius:8px;background:#f8f9fa}.accordion-button[_ngcontent-%COMP%]{background:#f8f9fa;border:none;border-radius:8px!important}.accordion-button[_ngcontent-%COMP%]:not(.collapsed){background:#007bff;color:#fff}pre[_ngcontent-%COMP%]{font-size:.875rem;overflow-x:auto}.badge[_ngcontent-%COMP%]{font-size:.75rem}.text-break[_ngcontent-%COMP%]{word-break:break-all}"]})};export{j as CompanyLinksComponent};
