import{a as Ne}from"./chunk-UDQRDKE7.js";import{b as ci,c as fi,f as mi}from"./chunk-VSOXVEJA.js";import{b as di,c as ui,d as hi}from"./chunk-TY3OC3KD.js";import{A as xi,B as Ei,C as wi,G as mt,J as I,a as Zt,b as Jt,d as ei,e as Je,f as ti,h as gi,i as Oe,j as X,k as yi,l as Y,n as vi,o as Ve,q as ke,r as et,u as Ci,v as bi,w as J,x as _i,z as Fi}from"./chunk-XK5HOQP2.js";import{c as Xt,d as Yt}from"./chunk-ZHVOT3GW.js";import{A as oi,B as si,C as ai,D as li,E as pi,F as ge,G as Oi,H as ki,I as tt,v as ii,w as ni,z as ri}from"./chunk-OGGO43S6.js";import{$b as Ut,Aa as Ze,Ab as Gt,Ba as _,Bb as Bt,Bc as zt,Ca as lt,Cb as Lt,Db as l,Eb as d,Fb as u,Gb as O,H as Ot,I as qe,Kb as se,Kc as Ee,Lb as ae,Lc as we,M as kt,Mb as Pe,Mc as K,Nb as je,P as It,Pb as le,Qc as Kt,Rb as f,Rc as Z,Sb as Ht,Ta as jt,Tb as Wt,Tc as k,Ub as te,Vb as ie,W as at,Wb as ne,X as At,Xa as c,Xb as re,Yb as $t,Z as ze,Za as pt,Zb as x,_a as Se,a as V,aa as oe,ab as ct,ac as C,b as fe,ba as b,bb as S,bc as q,c as xt,cb as W,cc as N,d as $e,da as Dt,ea as xe,f as Ue,fa as B,fb as g,gb as F,ha as Mt,hb as ue,i as Fe,ib as ft,jb as y,jc as Qt,kb as m,l as Et,la as Re,lb as Vt,m as wt,ma as Te,nc as Xe,pa as Rt,pc as P,qa as Tt,qc as z,rc as he,sb as Nt,sc as v,ua as St,uc as qt,v as Qe,va as Pt,vb as T,x as me,z as de,za as Ke,zc as Ye}from"./chunk-D5KXDZZX.js";var tn=["container"];function nn(n,e){}function rn(n,e){}var on=["*"];function sn(n,e){if(n&1&&O(0,"formly-field",0),n&2){let r=e.$implicit;l("field",r)}}var Ii=["fieldComponent"];function an(n,e){let r=n._updateTreeValidity.bind(n);n._updateTreeValidity=()=>{},e(),n._updateTreeValidity=r}function ln(n,e,r){if(e.id)return e.id;let t=e.type;return!t&&e.template&&(t="template"),t instanceof Ke&&(t=t.prototype.constructor.name),[n,t,e.key,r].join("_")}function w(n){return!pe(n.key)&&n.key!==""&&(!Array.isArray(n.key)||n.key.length>0)}function ye(n){if(!w(n))return[];if(n._keyPath?.key!==n.key){let e=[];if(typeof n.key=="string"){let r=n.key.indexOf("[")===-1?n.key:n.key.replace(/\[(\w+)\]/g,".$1");e=r.indexOf(".")!==-1?r.split("."):[r]}else Array.isArray(n.key)?e=n.key.slice(0):e=[`${n.key}`];D(n,"_keyPath",{key:n.key,path:e})}return n._keyPath.path.slice(0)}var Ct=["required","pattern","minLength","maxLength","min","max"];function Be(n,e){let r=ye(n);if(r.length===0)return;let t=n;for(;t.parent;)t=t.parent,r=[...ye(t),...r];if(e===void 0&&n.resetOnHide){let i=r.pop(),o=r.reduce((s,a)=>s[a]||{},t.model);delete o[i];return}pn(t.model,r,e)}function pn(n,e,r){for(let t=0;t<e.length-1;t++){let i=e[t];(!n[i]||!$(n[i]))&&(n[i]=/^\d+$/.test(e[t+1])?[]:{}),n=n[i]}n[e[e.length-1]]=ce(r)}function ve(n){let e=n.parent?n.parent.model:n.model;for(let r of ye(n)){if(!e)return e;e=e[r]}return e}function Ie(n,...e){return e.forEach(r=>{for(let t in r)pe(n[t])||cn(n[t])?n[t]=ce(r[t]):fn(n[t],r[t])&&Ie(n[t],r[t])}),n}function pe(n){return n==null}function it(n){return n===void 0}function cn(n){return n===""}function dt(n){return typeof n=="function"}function fn(n,e){return $(n)&&$(e)&&Object.getPrototypeOf(n)===Object.getPrototypeOf(e)&&!(Array.isArray(n)||Array.isArray(e))}function $(n){return n!=null&&typeof n=="object"}function mn(n){return!!n&&typeof n.then=="function"}function ce(n){if(!$(n)||me(n)||n instanceof pt||n.changingThisBreaksApplicationSecurity||["RegExp","FileList","File","Blob"].indexOf(n.constructor?.name)!==-1)return n;if(n instanceof Set)return new Set(n);if(n instanceof Map)return new Map(n);if(n instanceof Uint8Array)return new Uint8Array(n);if(n instanceof Uint16Array)return new Uint16Array(n);if(n instanceof Uint32Array)return new Uint32Array(n);if(n._isAMomentObject&&dt(n.clone))return n.clone();if(n instanceof vi)return null;if(n instanceof Date)return new Date(n.getTime());if(Array.isArray(n))return n.slice(0).map(t=>ce(t));let e=Object.getPrototypeOf(n),r=Object.create(e);return r=Object.setPrototypeOf(r,e),Object.keys(n).reduce((t,i)=>{let o=Object.getOwnPropertyDescriptor(n,i);return o.get?Object.defineProperty(t,i,o):t[i]=ce(n[i]),t},r)}function D(n,e,r){Object.defineProperty(n,e,{enumerable:!1,writable:!0,configurable:!0}),n[e]=r}function Mi(n,e,r){let t=[],i=()=>{t.forEach(s=>s()),t=[]},o=A(n,e,({firstChange:s,currentValue:a})=>{!s&&r(),i(),$(a)&&a.constructor.name==="Object"&&Object.keys(a).forEach(p=>{t.push(Mi(n,[...e,p],r))})});return()=>{o.unsubscribe(),i()}}function A(n,e,r){n._observers||D(n,"_observers",{});let t=n;for(let a=0;a<e.length-1;a++)(!t[e[a]]||!$(t[e[a]]))&&(t[e[a]]=/^\d+$/.test(e[a+1])?[]:{}),t=t[e[a]];let i=e[e.length-1],o=e.join(".");n._observers[o]||(n._observers[o]={value:t[i],onChange:[]});let s=n._observers[o];if(t[i]!==s.value&&(s.value=t[i]),r&&s.onChange.indexOf(r)===-1&&(s.onChange.push(r),r({currentValue:s.value,firstChange:!0}),s.onChange.length>=1&&$(t))){let{enumerable:a}=Object.getOwnPropertyDescriptor(t,i)||{enumerable:!0};Object.defineProperty(t,i,{enumerable:a,configurable:!0,get:()=>s.value,set:p=>{if(p!==s.value){let h=s.value;s.value=p,s.onChange.forEach(E=>E({previousValue:h,currentValue:p,firstChange:!1}))}}})}return{setValue(a,p=!0){if(a===s.value)return;let h=s.value;s.value=a,s.onChange.forEach(E=>{E!==r&&p&&E({previousValue:h,currentValue:a,firstChange:!1})})},unsubscribe(){s.onChange=s.onChange.filter(a=>a!==r),s.onChange.length===0&&delete n._observers[o]}}}function Ri(n,e){if(e=Array.isArray(e)?e.join("."):e,!!n.fieldGroup)for(let r=0,t=n.fieldGroup.length;r<t;r++){let i=n.fieldGroup[r],o=Array.isArray(i.key)?i.key.join("."):i.key;if(o===e)return i;if(i.fieldGroup&&(pe(o)||e.indexOf(`${o}.`)===0)){let s=Ri(i,pe(o)?e:e.slice(o.length+1));if(s)return s}}}function ut(n){n._componentRefs?.forEach(e=>{e instanceof Se?e.injector.get(zt).markForCheck():e.markForCheck()})}function Ti(n){let e=t=>t.hide||t.expressions?.hide||t.hideExpression,r=!n.resetOnHide||!e(n);if(!e(n)&&n.resetOnHide){let t=n.parent;for(;t&&!e(t);)t=t.parent;r=!t||!e(t)}return!r}function bt(){return+Ye.major>18||+Ye.major>=18&&+Ye.minor>=1}function dn(n,e){try{return Function(...e,`return ${n};`)}catch(r){console.error(r)}}function un(n,e,r){return typeof n=="function"?n.apply(e,r):!!n}function hn(n,e=!1){let r=n.formControl,t=r._fields?r._fields.indexOf(n):-1;t!==-1&&r._fields.splice(t,1);let i=r.parent;if(!i)return;let o={emitEvent:e};if(i instanceof mt){let s=i.controls.findIndex(a=>a===r);s!==-1&&i.removeAt(s,o)}else if(i instanceof Ve){let s=ye(n),a=s[s.length-1];i.get([a])===r&&i.removeControl(a,o)}r.setParent(null)}function gn(n){return n.formControl?n.formControl:n.shareFormControl===!1?null:n.form?.get(ye(n))}function Si(n,e,r=!1){if(e=e||n.formControl,e._fields||D(e,"_fields",[]),e._fields.indexOf(n)===-1&&e._fields.push(n),!n.formControl&&e){D(n,"formControl",e),e.setValidators(null),e.setAsyncValidators(null),n.props.disabled=!!n.props.disabled;let a=A(n,["props","disabled"],({firstChange:p,currentValue:h})=>{p||(h?n.formControl.disable():n.formControl.enable())});e instanceof ke&&e.registerOnDisabledChange(a.setValue)}if(!n.form||!w(n))return;let t=n.form,i=ye(n),o=ve(n);!(pe(e.value)&&pe(o))&&e.value!==o&&e instanceof ke&&e.patchValue(o);for(let a=0;a<i.length-1;a++){let p=i[a];t.get([p])||t.setControl(p,new Ve({}),{emitEvent:r}),t=t.get([p])}let s=i[i.length-1];!n._hide&&t.get([s])!==e&&t.setControl(s,e,{emitEvent:r})}function Le(n,e=!1){let r=n.status,t=n.value;n.updateValueAndValidity({emitEvent:!1,onlySelf:e}),r!==n.status&&n.statusChanges.emit(n.status),t!==n.value&&n.valueChanges.emit(n.value)}var ht=class{onPopulate(e){if(e._expressions)return;D(e,"_expressions",{}),A(e,["hide"],({currentValue:t,firstChange:i})=>{D(e,"_hide",!!t),(!i||i&&t===!0)&&(e.props.hidden=t,e.options._hiddenFieldsForCheck.push({field:e}))}),e.hideExpression&&A(e,["hideExpression"],({currentValue:t})=>{e._expressions.hide=this.parseExpressions(e,"hide",typeof t=="boolean"?()=>t:t)});let r=(t,i)=>{typeof i=="string"||dt(i)?e._expressions[t]=this.parseExpressions(e,t,i):i instanceof Fe&&(e._expressions[t]={value$:i.pipe(ze(o=>{this.evalExpr(e,t,o),e.options._detectChanges(e)}))})};e.expressions=e.expressions||{};for(let t of Object.keys(e.expressions))A(e,["expressions",t],({currentValue:i})=>{r(t,dt(i)?(...o)=>i(e,o[3]):i)});e.expressionProperties=e.expressionProperties||{};for(let t of Object.keys(e.expressionProperties))A(e,["expressionProperties",t],({currentValue:i})=>r(t,i))}postPopulate(e){if(!e.parent&&!e.options.checkExpressions){let r=!1;e.options.checkExpressions=(t,i)=>{if(r)return;r=!0;let o=this.checkExpressions(t,i),s=e.options;s._hiddenFieldsForCheck.sort(a=>a.field.hide?-1:1).forEach(a=>this.changeHideState(a.field,a.field.hide??a.default,!i)),s._hiddenFieldsForCheck=[],o&&this.checkExpressions(e),r=!1}}}parseExpressions(e,r,t){let i;if(e.parent&&["hide","props.disabled"].includes(r)){let s=a=>r==="hide"?a.hide:a.props.disabled;i=()=>{let a=e.parent;for(;a.parent&&!s(a);)a=a.parent;return s(a)}}t=t||(()=>!1),typeof t=="string"&&(t=dn(t,["model","formState","field"]));let o;return{callback:s=>{try{let a=un(i?(...p)=>i(e)||t(...p):t,{field:e},[e.model,e.options.formState,e,s]);return s||o!==a&&(!$(a)||me(a)||JSON.stringify(a)!==JSON.stringify(o))?(o=a,this.evalExpr(e,r,a),!0):!1}catch(a){throw a.message=`[Formly Error] [Expression "${r}"] ${a.message}`,a}}}}checkExpressions(e,r=!1){if(!e)return!1;let t=!1;if(e._expressions)for(let i of Object.keys(e._expressions))e._expressions[i].callback?.(r)&&(t=!0);return e.fieldGroup?.forEach(i=>this.checkExpressions(i,r)&&(t=!0)),t}changeDisabledState(e,r){e.fieldGroup&&e.fieldGroup.filter(t=>!t._expressions.hasOwnProperty("props.disabled")).forEach(t=>this.changeDisabledState(t,r)),w(e)&&e.props.disabled!==r&&(e.props.disabled=r)}changeHideState(e,r,t){if(e.fieldGroup&&e.fieldGroup.filter(i=>i&&!i._expressions.hide).forEach(i=>this.changeHideState(i,r,t)),e.formControl&&w(e)){D(e,"_hide",!!(r||e.hide));let i=e.formControl;i._fields?.length>1&&Le(i),r===!0&&(!i._fields||i._fields.every(o=>!!o._hide))?(hn(e,!0),t&&e.resetOnHide&&(Be(e,void 0),e.formControl.reset({value:void 0,disabled:e.formControl.disabled}),e.options.fieldChanges.next({value:void 0,field:e,type:"valueChanges"}),e.fieldGroup&&e.formControl instanceof mt&&(e.fieldGroup.length=0))):r===!1&&(e.resetOnHide&&!it(e.defaultValue)&&it(ve(e))&&Be(e,e.defaultValue),Si(e,void 0,!0),e.resetOnHide&&e.fieldArray&&e.fieldGroup?.length!==e.model?.length&&e.options.build(e))}e.options.fieldChanges&&e.options.fieldChanges.next({field:e,type:"hidden",value:r})}evalExpr(e,r,t){if(r.indexOf("model.")===0){let i=r.replace(/^model\./,""),o=e.fieldGroup?e:e.parent,s=e?.key===i?e.formControl:e.form.get(i);!s&&e.get(i)&&(s=e.get(i).formControl),Be({key:i,parent:o,model:e.model},t),s&&!(pe(s.value)&&pe(t))&&s.value!==t&&s.patchValue(t)}else{try{let i=e,o=this._evalExpressionPath(e,r),s=o.length-1;for(let a=0;a<s;a++)i=i[o[a]];i[o[s]]=t}catch(i){throw i.message=`[Formly Error] [Expression "${r}"] ${i.message}`,i}["templateOptions.disabled","props.disabled"].includes(r)&&w(e)&&this.changeDisabledState(e,t)}this.emitExpressionChanges(e,r,t)}emitExpressionChanges(e,r,t){e.options.fieldChanges&&e.options.fieldChanges.next({field:e,type:"expressionChanges",property:r,value:t})}_evalExpressionPath(e,r){if(e._expressions[r]&&e._expressions[r].paths)return e._expressions[r].paths;let t=[];return r.indexOf("[")===-1?t=r.split("."):r.split(/[[\]]{1,2}/).filter(i=>i).forEach(i=>{let o=i.match(/['|"](.*?)['|"]/);o?t.push(o[1]):t.push(...i.split(".").filter(s=>s))}),e._expressions[r]&&(e._expressions[r].paths=t),t}},gt=class{constructor(e){this.config=e,this.formId=0}prePopulate(e){let r=e.parent;this.initRootOptions(e),this.initFieldProps(e),r&&(Object.defineProperty(e,"options",{get:()=>r.options,configurable:!0}),Object.defineProperty(e,"model",{get:()=>w(e)&&e.fieldGroup?ve(e):r.model,configurable:!0})),Object.defineProperty(e,"get",{value:t=>Ri(e,t),configurable:!0}),this.getFieldComponentInstance(e).prePopulate?.(e)}onPopulate(e){this.initFieldOptions(e),this.getFieldComponentInstance(e).onPopulate?.(e),e.fieldGroup&&e.fieldGroup.forEach((r,t)=>{r&&(Object.defineProperty(r,"parent",{get:()=>e,configurable:!0}),Object.defineProperty(r,"index",{get:()=>t,configurable:!0})),this.formId++})}postPopulate(e){this.getFieldComponentInstance(e).postPopulate?.(e)}initFieldProps(e){e.props??=e.templateOptions,Object.defineProperty(e,"templateOptions",{get:()=>e.props,set:r=>e.props=r,configurable:!0})}initRootOptions(e){if(e.parent)return;let r=e.options;e.options.formState=e.options.formState||{},r.showError||(r.showError=this.config.extras.showError),r.fieldChanges||D(r,"fieldChanges",new Et),r._hiddenFieldsForCheck||(r._hiddenFieldsForCheck=[]),r._detectChanges=t=>{t._componentRefs&&ut(t),t.fieldGroup?.forEach(i=>i&&r._detectChanges(i))},r.detectChanges=t=>{t.options.checkExpressions?.(t),r._detectChanges(t)},r.resetModel=t=>{t=ce(t??r._initialModel),e.model&&(Object.keys(e.model).forEach(i=>delete e.model[i]),Object.assign(e.model,t||{})),bt()||A(r,["parentForm","submitted"]).setValue(!1,!1),r.build(e),e.form.reset(e.model)},r.updateInitialValue=t=>r._initialModel=ce(t??e.model),e.options.updateInitialValue()}initFieldOptions(e){Ie(e,{id:ln(`formly_${this.formId}`,e,e.index),hooks:{},modelOptions:{},validation:{messages:{}},props:!e.type||!w(e)?{}:{label:"",placeholder:"",disabled:!1}}),this.config.extras.resetFieldOnHide&&e.resetOnHide!==!1&&(e.resetOnHide=!0),e.type!=="formly-template"&&(e.template||e.expressions?.template||e.expressionProperties?.template)&&(e.type="formly-template"),!e.type&&e.fieldGroup&&(e.type="formly-group"),e.type&&this.config.getMergedField(e),w(e)&&!it(e.defaultValue)&&it(ve(e))&&!Ti(e)&&Be(e,e.defaultValue),e.wrappers=e.wrappers||[]}getFieldComponentInstance(e){let r=()=>{let t=this.config.resolveFieldTypeRef(e),i=e._componentRefs?.slice(-1)[0];return i instanceof Se&&i?.componentType===t?.componentType&&(t=i),t?.instance};return e._proxyInstance||D(e,"_proxyInstance",new Proxy({},{get:(t,i)=>r()?.[i],set:(t,i,o)=>r()[i]=o})),e._proxyInstance}},yt=class{prePopulate(e){this.root||(this.root=e),e.parent&&Object.defineProperty(e,"form",{get:()=>e.parent.formControl,configurable:!0})}onPopulate(e){e.hasOwnProperty("fieldGroup")&&!w(e)?D(e,"formControl",e.form):this.addFormControl(e)}postPopulate(e){if(this.root!==e)return;if(this.root=null,this.setValidators(e)&&e.parent){let t=e.parent;for(;t;)(w(t)||!t.parent)&&Le(t.formControl,!0),t=t.parent}}addFormControl(e){let r=gn(e);if(!e.fieldArray){if(r){if(r instanceof ke){let t=w(e)?ve(e):e.defaultValue;r.defaultValue=t}}else{let t={updateOn:e.modelOptions.updateOn};if(e.fieldGroup)r=new Ve({},t);else{let i=w(e)?ve(e):e.defaultValue;r=new et({value:i,disabled:!!e.props.disabled},fe(V({},t),{initialValueIsDefault:!0}))}}Si(e,r)}}setValidators(e,r=!1){r===!1&&w(e)&&e.props?.disabled&&(r=!0);let t=!1;if(e.fieldGroup?.forEach(i=>i&&this.setValidators(i,r)&&(t=!0)),w(e)||!e.parent||!w(e)&&!e.fieldGroup){let{formControl:i}=e;if(i&&(w(e)&&i instanceof ke&&(r&&i.enabled&&(i.disable({emitEvent:!1,onlySelf:!0}),t=!0),!r&&i.disabled&&(i.enable({emitEvent:!1,onlySelf:!0}),t=!0)),i.validator===null&&this.hasValidators(e,"_validators")&&(i.setValidators(()=>{let o=X.compose(this.mergeValidators(e,"_validators"));return o?o(i):null}),t=!0),i.asyncValidator===null&&this.hasValidators(e,"_asyncValidators")&&(i.setAsyncValidators(()=>{let o=X.composeAsync(this.mergeValidators(e,"_asyncValidators"));return o?o(i):Qe(null)}),t=!0),t)){Le(i,!0);let o=i.parent;for(let s=1;s<ye(e).length;s++)o&&(Le(o,!0),o=o.parent)}}return t}hasValidators(e,r){let t=e.formControl;return t?._fields?.length>1&&t._fields.some(i=>i[r].length>0)||e[r].length>0?!0:e.fieldGroup?.some(i=>i?.fieldGroup&&!w(i)&&this.hasValidators(i,r))}mergeValidators(e,r){let t=[],i=e.formControl;return i?._fields?.length>1?i._fields.filter(o=>!o._hide).forEach(o=>t.push(...o[r])):e[r]&&t.push(...e[r]),e.fieldGroup&&e.fieldGroup.filter(o=>o?.fieldGroup&&!w(o)).forEach(o=>t.push(...this.mergeValidators(o,r))),t}},vt=class{constructor(e){this.config=e}onPopulate(e){this.initFieldValidation(e,"validators"),this.initFieldValidation(e,"asyncValidators")}initFieldValidation(e,r){let t=[];if(r==="validators"&&!(e.hasOwnProperty("fieldGroup")&&!w(e))&&t.push(this.getPredefinedFieldValidation(e)),e[r])for(let i of Object.keys(e[r]))i==="validation"?t.push(...e[r].validation.map(o=>this.wrapNgValidatorFn(e,o))):t.push(this.wrapNgValidatorFn(e,e[r][i],i));D(e,"_"+r,t)}getPredefinedFieldValidation(e){let r=[];return Ct.forEach(t=>A(e,["props",t],({currentValue:i,firstChange:o})=>{r=r.filter(s=>s!==t),t==="required"&&i!=null&&typeof i!="boolean"&&console.warn(`Formly: Invalid prop 'required' of type '${typeof i}', expected 'boolean' (Field:${e.key}).`),i!=null&&i!==!1&&r.push(t),!o&&e.formControl&&Le(e.formControl)})),t=>r.length===0?null:X.compose(r.map(i=>()=>{let o=e.props[i];switch(i){case"required":return X.required(t);case"pattern":return X.pattern(o)(t);case"minLength":let s=X.minLength(o)(t),a=this.config.getValidatorMessage("minlength")||e.validation?.messages?.minlength?"minlength":"minLength";return s?{[a]:s.minlength}:null;case"maxLength":let p=X.maxLength(o)(t),h=this.config.getValidatorMessage("maxlength")||e.validation?.messages?.maxlength?"maxlength":"maxLength";return p?{[h]:p.maxlength}:null;case"min":return X.min(o)(t);case"max":return X.max(o)(t);default:return null}}))(t)}wrapNgValidatorFn(e,r,t){let i;if(typeof r=="string"&&(i=ce(this.config.getValidator(r))),typeof r=="object"&&r.name&&(i=ce(this.config.getValidator(r.name)),r.options&&(i.options=r.options)),typeof r=="object"&&r.expression){let o=r,{expression:s}=o,a=$e(o,["expression"]);i={name:t,validation:s,options:Object.keys(a).length>0?a:null}}return typeof r=="function"&&(i={name:t,validation:r}),s=>{let a=i.validation(s,e,i.options);return mn(a)?a.then(p=>this.handleResult(e,t?!!p:p,i)):me(a)?a.pipe(de(p=>this.handleResult(e,t?!!p:p,i))):this.handleResult(e,t?!!a:a,i)}}handleResult(e,r,{name:t,options:i}){typeof r=="boolean"&&(r=r?null:{[t]:i||!0});let o=e.formControl;return o?._childrenErrors?.[t]?.(),$(r)&&Object.keys(r).forEach(s=>{let a=r[s].errorPath?r[s].errorPath:i?.errorPath,p=a?e.formControl.get(a):null;if(p){let h=r[s],{errorPath:E}=h,U=$e(h,["errorPath"]);p.setErrors(fe(V({},p.errors||{}),{[s]:U})),!o._childrenErrors&&D(o,"_childrenErrors",{}),o._childrenErrors[s]=()=>{let Ft=p.errors||{},{[s]:R}=Ft,Q=$e(Ft,[xt(s)]);p.setErrors(Object.keys(Q).length===0?null:Q)}}}),r}},We=(()=>{let e=class e{constructor(){this.field={}}set _formlyControls(t){let i=this.field;i._localFields=t.map(o=>o.control._fields||[]).flat().filter(o=>o.formControl!==this.field.formControl)}get model(){return this.field.model}get form(){return this.field.form}get options(){return this.field.options}get key(){return this.field.key}get formControl(){return this.field.formControl}get props(){return this.field.props||{}}get to(){return this.props}get showError(){return this.options.showError(this)}get id(){return this.field.id}get formState(){return this.options?.formState||{}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=ue({type:e,viewQuery:function(i,o){if(i&1&&te(yi,5),i&2){let s;ie(s=ne())&&(o._formlyControls=s)}},inputs:{field:"field"},standalone:!1});let n=e;return n})(),yn=(()=>{let e=class e extends We{get template(){return this.field&&this.field.template!==this.innerHtml.template&&(this.innerHtml={template:this.field.template,content:this.props.safeHtml?this.sanitizer.bypassSecurityTrustHtml(this.field.template):this.field.template}),this.innerHtml.content}constructor(t){super(),this.sanitizer=t,this.innerHtml={}}};e.\u0275fac=function(i){return new(i||e)(S(Jt))},e.\u0275cmp=g({type:e,selectors:[["formly-template"]],standalone:!1,features:[y],decls:1,vars:1,consts:[[3,"innerHtml"]],template:function(i,o){i&1&&O(0,"div",0),i&2&&l("innerHtml",o.template,jt)},encapsulation:2,changeDetection:0});let n=e;return n})(),Ae=(()=>{let e=class e{constructor(){this.types={},this.validators={},this.wrappers={},this.messages={},this.extras={checkExpressionOn:"modelChange",lazyRender:!0,resetFieldOnHide:!0,renderFormlyFieldElement:!0,showError(t){return t.formControl?.invalid&&(t.formControl?.touched||t.options.parentForm?.submitted||!!t.field.validation?.show)}},this.extensions={},this.presets={},this.extensionsByPriority={},this.componentRefs={}}addConfig(t){if(Array.isArray(t)){t.forEach(i=>this.addConfig(i));return}t.types&&t.types.forEach(i=>this.setType(i)),t.validators&&t.validators.forEach(i=>this.setValidator(i)),t.wrappers&&t.wrappers.forEach(i=>this.setWrapper(i)),t.validationMessages&&t.validationMessages.forEach(i=>this.addValidatorMessage(i.name,i.message)),t.extensions&&this.setSortedExtensions(t.extensions),t.extras&&(this.extras=V(V({},this.extras),t.extras)),t.presets&&(this.presets=V(V({},this.presets),t.presets.reduce((i,o)=>fe(V({},i),{[o.name]:o.config}),{})))}setType(t){Array.isArray(t)?t.forEach(i=>this.setType(i)):(this.types[t.name]||(this.types[t.name]={name:t.name}),["component","extends","defaultOptions","wrappers"].forEach(i=>{t.hasOwnProperty(i)&&(this.types[t.name][i]=t[i])}))}getType(t,i=!1){if(t instanceof Ke)return{component:t,name:t.prototype.constructor.name};if(!this.types[t]){if(i)throw new Error(`[Formly Error] The type "${t}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return null}return this.mergeExtendedType(t),this.types[t]}getMergedField(t={}){let i=this.getType(t.type);if(!i)return;i.defaultOptions&&Ie(t,i.defaultOptions);let o=i.extends&&this.getType(i.extends).defaultOptions;o&&Ie(t,o),t?.optionsTypes&&t.optionsTypes.forEach(a=>{let p=this.getType(a).defaultOptions;p&&Ie(t,p)});let s=this.resolveFieldTypeRef(t);s?.instance?.defaultOptions&&Ie(t,s.instance.defaultOptions),!t.wrappers&&i.wrappers&&(t.wrappers=[...i.wrappers])}resolveFieldTypeRef(t={}){let i=this.getType(t.type);if(!i||!i.component)return null;if(!this.componentRefs[i.name]){let{_viewContainerRef:o,_injector:s}=t.options;if(!o||!s)return null;let a=o.createComponent(i.component,{injector:s});this.componentRefs[i.name]=a;try{a.destroy()}catch(p){console.error(`An error occurred while destroying the Formly component type "${t.type}"`,p)}}return this.componentRefs[i.name]}clearRefs(){this.componentRefs={}}setWrapper(t){this.wrappers[t.name]=t,t.types&&t.types.forEach(i=>{this.setTypeWrapper(i,t.name)})}getWrapper(t){if(t instanceof Ke)return{component:t,name:t.prototype.constructor.name};if(!this.wrappers[t])throw new Error(`[Formly Error] The wrapper "${t}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.wrappers[t]}setTypeWrapper(t,i){this.types[t]||(this.types[t]={}),this.types[t].wrappers||(this.types[t].wrappers=[]),this.types[t].wrappers.indexOf(i)===-1&&this.types[t].wrappers.push(i)}setValidator(t){this.validators[t.name]=t}getValidator(t){if(!this.validators[t])throw new Error(`[Formly Error] The validator "${t}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.validators[t]}addValidatorMessage(t,i){this.messages[t]=i}getValidatorMessage(t){return this.messages[t]}setSortedExtensions(t){t.forEach(i=>{let o=i.priority??1;this.extensionsByPriority[o]=fe(V({},this.extensionsByPriority[o]),{[i.name]:i.extension})}),this.extensions=Object.keys(this.extensionsByPriority).map(Number).sort((i,o)=>i-o).reduce((i,o)=>V(V({},i),this.extensionsByPriority[o]),{})}mergeExtendedType(t){if(!this.types[t].extends)return;let i=this.getType(this.types[t].extends);this.types[t].component||(this.types[t].component=i.component),this.types[t].wrappers||(this.types[t].wrappers=i.wrappers)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var vn=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac});let n=e;return n})(),Cn=(()=>{let e=class e{get containerRef(){return this.config.extras.renderFormlyFieldElement?this.viewContainerRef:this.hostContainerRef}get elementRef(){return this.config.extras.renderFormlyFieldElement?this._elementRef:this.componentRefs?.[0]instanceof Se?this.componentRefs[0].location:null}constructor(t,i,o,s,a){this.config=t,this.renderer=i,this._elementRef=o,this.hostContainerRef=s,this.form=a,this.hostObservers=[],this.componentRefs=[],this.hooksObservers=[],this.detectFieldBuild=!1,this.valueChangesUnsubscribe=()=>{}}ngAfterContentInit(){this.triggerHook("afterContentInit")}ngAfterViewInit(){this.triggerHook("afterViewInit")}ngDoCheck(){this.detectFieldBuild&&this.field&&this.field.options&&this.render()}ngOnInit(){this.triggerHook("onInit")}ngOnChanges(t){this.triggerHook("onChanges",t)}ngOnDestroy(){this.resetRefs(this.field),this.hostObservers.forEach(t=>t.unsubscribe()),this.hooksObservers.forEach(t=>t()),this.valueChangesUnsubscribe(),this.triggerHook("onDestroy")}renderField(t,i,o=[]){if(this.containerRef===t&&(this.resetRefs(this.field),this.containerRef.clear(),o=this.field?.wrappers),o?.length>0){let[s,...a]=o,{component:p}=this.config.getWrapper(s),h=t.createComponent(p);this.attachComponentRef(h,i),A(h.instance,["fieldComponent"],({currentValue:E,previousValue:U,firstChange:R})=>{if(E){if(U&&U._lContainer===E._lContainer)return;let Q=U?U.detach():null;Q&&!Q.destroyed?E.insert(Q):this.renderField(E,i,a),!R&&h.changeDetectorRef.detectChanges()}})}else if(i?.type){let s=this.form?.templates?.find(p=>p.name===i.type),a;if(s)a=t.createEmbeddedView(s.ref,{$implicit:i});else{let{component:p}=this.config.getType(i.type,!0);a=t.createComponent(p)}this.attachComponentRef(a,i)}}triggerHook(t,i){if((t==="onInit"||t==="onChanges"&&i.field&&!i.field.firstChange)&&(this.valueChangesUnsubscribe(),this.valueChangesUnsubscribe=this.fieldChanges(this.field)),this.field?.hooks?.[t]&&(!i||i.field)){let o=this.field.hooks[t](this.field);if(me(o)&&["onInit","afterContentInit","afterViewInit"].indexOf(t)!==-1){let s=o.subscribe();this.hooksObservers.push(()=>s.unsubscribe())}}t==="onChanges"&&i.field&&(this.resetRefs(i.field.previousValue),this.render())}attachComponentRef(t,i){this.componentRefs.push(t),i._componentRefs.push(t),t instanceof Se&&Object.assign(t.instance,{field:i})}render(){if(this.field){if(!this.field.options){this.detectFieldBuild=!0;return}if(this.detectFieldBuild=!1,this.hostObservers.forEach(t=>t.unsubscribe()),this.hostObservers=[A(this.field,["hide"],({firstChange:t,currentValue:i})=>{let o=this.containerRef;this.config.extras.lazyRender===!1?(t&&this.renderField(o,this.field),(!t||t&&i)&&this.elementRef&&this.renderer.setStyle(this.elementRef.nativeElement,"display",i?"none":"")):i?(o.clear(),this.field.className&&this.renderer.removeAttribute(this.elementRef.nativeElement,"class")):(this.renderField(o,this.field),this.field.className&&this.renderer.setAttribute(this.elementRef.nativeElement,"class",this.field.className)),!t&&this.field.options.detectChanges(this.field)}),A(this.field,["className"],({firstChange:t,currentValue:i})=>{(!t||t&&i)&&(!this.config.extras.lazyRender||this.field.hide!==!0)&&this.elementRef&&this.renderer.setAttribute(this.elementRef.nativeElement,"class",i)})],!bt())["touched","pristine","status"].forEach(t=>this.hostObservers.push(A(this.field,["formControl",t],({firstChange:i})=>!i&&ut(this.field))));else if(this.field.formControl){let t=this.field.formControl.events.subscribe(()=>ut(this.field));this.hostObservers.push(t)}}}resetRefs(t){t&&(t._localFields?t._localFields=[]:D(this.field,"_localFields",[]),t._componentRefs?t._componentRefs=t._componentRefs.filter(i=>this.componentRefs.indexOf(i)===-1):D(this.field,"_componentRefs",[])),this.componentRefs=[]}fieldChanges(t){if(!t)return()=>{};let i=Mi(t,["props"],()=>t.options.detectChanges(t)),o=[()=>{i()}];for(let a of Object.keys(t._expressions||{})){let p=A(t,["_expressions",a],({currentValue:h,previousValue:E})=>{E?.subscription&&(E.subscription.unsubscribe(),E.subscription=null),me(h.value$)&&(h.subscription=h.value$.subscribe())});o.push(()=>{t._expressions[a]?.subscription&&t._expressions[a].subscription.unsubscribe(),p.unsubscribe()})}for(let a of[["focus"],["template"],["fieldGroupClassName"],["validation","show"]]){let p=A(t,a,({firstChange:h})=>!h&&t.options.detectChanges(t));o.push(()=>p.unsubscribe())}if(t.formControl&&!t.fieldGroup){let a=t.formControl,p=a.valueChanges.pipe(de(R=>(t.parsers?.map(Q=>R=Q(R,t)),Object.is(R,t.formControl.value)||t.formControl.setValue(R),R)),It((R,Q)=>!(R!==Q||Array.isArray(R)||$(R))));a.value!==ve(t)&&(p=p.pipe(at(a.value)));let{updateOn:h,debounce:E}=t.modelOptions;(!h||h==="change")&&E?.default>0&&(p=p.pipe(kt(E.default)));let U=p.subscribe(R=>{a._fields?.length>1&&a instanceof ke&&a.patchValue(R,{emitEvent:!1,onlySelf:!0}),w(t)&&Be(t,R),t.options.fieldChanges.next({value:R,field:t,type:"valueChanges"})});o.push(()=>U.unsubscribe())}let s=[];return A(t,["_localFields"],({currentValue:a})=>{s.forEach(p=>p()),s=(a||[]).map(p=>this.fieldChanges(p))}),()=>{o.forEach(a=>a()),s.forEach(a=>a())}}};e.\u0275fac=function(i){return new(i||e)(S(Ae),S(ct),S(lt),S(W),S(vn,8))},e.\u0275cmp=g({type:e,selectors:[["formly-field"]],viewQuery:function(i,o){if(i&1&&te(tn,7,W),i&2){let s;ie(s=ne())&&(o.viewContainerRef=s.first)}},inputs:{field:"field"},features:[Ze],decls:2,vars:0,consts:[["container",""]],template:function(i,o){i&1&&Vt(0,nn,0,0,"ng-template",null,0,v)},styles:["[_nghost-%COMP%]:empty{display:none}"]});let n=e;return n})(),bn=(()=>{let e=class e extends Cn{};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=_(e)))(o||e)}})(),e.\u0275cmp=g({type:e,selectors:[["formly-field"]],standalone:!1,features:[y],decls:2,vars:0,consts:[["container",""]],template:function(i,o){i&1&&m(0,rn,0,0,"ng-template",null,0,v)},styles:["[_nghost-%COMP%]:empty{display:none}"]});let n=e;return n})(),_n=(()=>{let e=class e extends We{};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=_(e)))(o||e)}})(),e.\u0275cmp=g({type:e,selectors:[["formly-group"]],hostVars:2,hostBindings:function(i,o){i&2&&Ut(o.field.fieldGroupClassName||"")},standalone:!1,features:[y],ngContentSelectors:on,decls:3,vars:0,consts:[[3,"field"]],template:function(i,o){i&1&&(Ht(),Bt(0,sn,1,1,"formly-field",0,Gt),Wt(2)),i&2&&Lt(o.field.fieldGroup)},dependencies:[bn],encapsulation:2,changeDetection:0});let n=e;return n})(),Ge=new Dt("FORMLY_CONFIG");function Ai(n){return{types:[{name:"formly-group",component:_n},{name:"formly-template",component:yn}],extensions:[{name:"core",extension:new gt(n),priority:-250},{name:"field-validation",extension:new vt(n),priority:-200},{name:"field-form",extension:new yt,priority:-150},{name:"field-expression",extension:new ht,priority:-100}]}}var Di=(()=>{let e=class e{constructor(t,i,o,s,a=[]){this.config=t,this.injector=i,this.viewContainerRef=o,this.parentForm=s,a&&a.forEach(p=>t.addConfig(p))}buildForm(t,i=[],o,s){this.build({fieldGroup:i,model:o,form:t,options:s})}build(t){if(!this.config.extensions.core)throw new Error("NgxFormly: missing `forRoot()` call. use `forRoot()` when registering the `FormlyModule`.");t.parent||this._setOptions(t),an(t.form,()=>{if(this._build(t),!t.parent||t.fieldArray){let i=t.options;t.parent&&Ti(t)&&i._hiddenFieldsForCheck?.push({field:t,default:!1}),i.checkExpressions?.(t,!0),i._detectChanges?.(t)}})}_build(t){if(!t)return;let i=Object.values(this.config.extensions);i.forEach(o=>o.prePopulate?.(t)),i.forEach(o=>o.onPopulate?.(t)),t.fieldGroup?.forEach(o=>this._build(o)),i.forEach(o=>o.postPopulate?.(t))}_setOptions(t){t.form=t.form||new Ve({}),t.model=t.model||{},t.options=t.options||{};let i=t.options;i._viewContainerRef||D(i,"_viewContainerRef",this.viewContainerRef),i._injector||D(i,"_injector",this.injector),i.build||(i.build=(o=t)=>(this.build(o),o)),!i.parentForm&&this.parentForm&&(D(i,"parentForm",this.parentForm),bt()||A(i,["parentForm","submitted"],({firstChange:o})=>{o||i.detectChanges(t)}))}};e.\u0275fac=function(i){return new(i||e)(xe(Ae),xe(Rt),xe(W,8),xe(_i,8),xe(Ge,8))},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Fn=(()=>{let e=class e{get props(){return this.field.props||{}}get fieldAttrElements(){return this.field?._elementRefs||[]}constructor(t,i,o){this.renderer=t,this.elementRef=i,this.uiAttributesCache={},this.uiEvents={listeners:[],events:["click","keyup","keydown","keypress","focus","blur","change","wheel"],callback:(s,a)=>{switch(s){case"focus":return this.onFocus(a);case"blur":return this.onBlur(a);case"change":return this.onChange(a);default:return this.props[s](this.field,a)}}},this.document=o}ngOnChanges(t){t.field&&(this.field.name&&this.setAttribute("name",this.field.name),this.uiEvents.listeners.forEach(i=>i()),this.uiEvents.events.forEach(i=>{(this.props?.[i]||["focus","blur","change"].indexOf(i)!==-1)&&this.uiEvents.listeners.push(this.renderer.listen(this.elementRef.nativeElement,i,o=>this.uiEvents.callback(i,o)))}),this.props?.attributes&&A(this.field,["props","attributes"],({currentValue:i,previousValue:o})=>{o&&Object.keys(o).forEach(s=>this.removeAttribute(s)),i&&Object.keys(i).forEach(s=>{i[s]!=null&&this.setAttribute(s,i[s])})}),this.detachElementRef(t.field.previousValue),this.attachElementRef(t.field.currentValue),this.fieldAttrElements.length===1&&(!this.id&&this.field.id&&this.setAttribute("id",this.field.id),this.focusObserver=A(this.field,["focus"],({currentValue:i})=>{this.toggleFocus(i)}))),t.id&&this.setAttribute("id",this.id)}ngDoCheck(){if(!this.uiAttributes){let t=this.elementRef.nativeElement;this.uiAttributes=[...Ct,"tabindex","placeholder","readonly","disabled","step"].filter(i=>!t.hasAttribute||!t.hasAttribute(i))}for(let t=0;t<this.uiAttributes.length;t++){let i=this.uiAttributes[t],o=this.props[i];this.uiAttributesCache[i]!==o&&(!this.props.attributes||!this.props.attributes.hasOwnProperty(i.toLowerCase()))&&(this.uiAttributesCache[i]=o,o||o===0?this.setAttribute(i,o===!0?i:`${o}`):this.removeAttribute(i))}}ngOnDestroy(){this.uiEvents.listeners.forEach(t=>t()),this.detachElementRef(this.field),this.focusObserver?.unsubscribe()}toggleFocus(t){let i=this.fieldAttrElements?this.fieldAttrElements[0]:null;if(!i||!i.nativeElement.focus)return;let o=!!this.document.activeElement&&this.fieldAttrElements.some(({nativeElement:s})=>this.document.activeElement===s||s.contains(this.document.activeElement));t&&!o?Promise.resolve().then(()=>i.nativeElement.focus()):!t&&o&&Promise.resolve().then(()=>i.nativeElement.blur())}onFocus(t){this.focusObserver?.setValue(!0),this.props.focus?.(this.field,t)}onBlur(t){this.focusObserver?.setValue(!1),this.props.blur?.(this.field,t)}onHostChange(t){t instanceof Event||this.onChange(t)}onChange(t){this.props.change?.(this.field,t),this.field.formControl?.markAsDirty()}attachElementRef(t){t&&(t._elementRefs?.indexOf(this.elementRef)===-1?t._elementRefs.push(this.elementRef):D(t,"_elementRefs",[this.elementRef]))}detachElementRef(t){let i=t?._elementRefs?this.fieldAttrElements.indexOf(this.elementRef):-1;i!==-1&&t._elementRefs.splice(i,1)}setAttribute(t,i){this.renderer.setAttribute(this.elementRef.nativeElement,t,i)}removeAttribute(t){this.renderer.removeAttribute(this.elementRef.nativeElement,t)}};e.\u0275fac=function(i){return new(i||e)(S(ct),S(lt),S(Tt))},e.\u0275dir=ue({type:e,selectors:[["","formlyAttributes",""]],hostBindings:function(i,o){i&1&&le("change",function(a){return o.onHostChange(a)})},inputs:{field:[0,"formlyAttributes","field"],id:"id"},features:[Ze]});let n=e;return n})(),L=(()=>{let e=class e extends Fn{};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=_(e)))(o||e)}})(),e.\u0275dir=ue({type:e,selectors:[["","formlyAttributes",""]],hostBindings:function(i,o){i&1&&le("change",function(a){return o.onHostChange(a)})},standalone:!1,features:[y]});let n=e;return n})(),xn=(()=>{let e=class e{constructor(t){this.config=t}ngOnChanges(){let t=Ct.map(i=>`templateOptions.${i}`);this.errorMessage$=Ot(this.field.formControl.statusChanges,this.field.options?this.field.options.fieldChanges.pipe(qe(({field:i,type:o,property:s})=>i===this.field&&o==="expressionChanges"&&(s.indexOf("validation")!==-1||t.indexOf(s)!==-1))):Qe(null)).pipe(at(null),At(()=>me(this.errorMessage)?this.errorMessage:Qe(this.errorMessage)))}get errorMessage(){let t=this.field.formControl;for(let i in t.errors)if(t.errors.hasOwnProperty(i)){let o=this.config.getValidatorMessage(i);if($(t.errors[i])){if(t.errors[i].errorPath)return;t.errors[i].message&&(o=t.errors[i].message)}return this.field.validation?.messages?.[i]&&(o=this.field.validation.messages[i]),this.field.validators?.[i]?.message&&(o=this.field.validators[i].message),this.field.asyncValidators?.[i]?.message&&(o=this.field.asyncValidators[i].message),typeof o=="function"?o(t.errors[i],this.field):o}}};e.\u0275fac=function(i){return new(i||e)(S(Ae))},e.\u0275cmp=g({type:e,selectors:[["formly-validation-message"]],inputs:{field:"field"},features:[Ze],decls:2,vars:3,template:function(i,o){i&1&&(C(0),P(1,"async")),i&2&&q(z(1,1,o.errorMessage$))},dependencies:[Z],encapsulation:2,changeDetection:0});let n=e;return n})(),Pi=(()=>{let e=class e extends xn{};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=_(e)))(o||e)}})(),e.\u0275cmp=g({type:e,selectors:[["formly-validation-message"]],standalone:!1,features:[y],decls:2,vars:3,template:function(i,o){i&1&&(C(0),P(1,"async")),i&2&&q(z(1,1,o.errorMessage$))},dependencies:[Z],encapsulation:2,changeDetection:0});let n=e;return n})();var nt=(()=>{let e=class e extends We{set _formlyControls(t){}set _staticContent(t){this.fieldComponent=t}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=_(e)))(o||e)}})(),e.\u0275dir=ue({type:e,viewQuery:function(i,o){if(i&1&&(te(Ii,5,W),te(Ii,7,W)),i&2){let s;ie(s=ne())&&(o.fieldComponent=s.first),ie(s=ne())&&(o._staticContent=s.first)}},standalone:!1,features:[y]});let n=e;return n})(),M=(()=>{let e=class e{static forRoot(t={}){return{ngModule:e,providers:[{provide:Ge,multi:!0,useFactory:Ai,deps:[Ae]},{provide:Ge,useValue:t,multi:!0},Ae,Di]}}static forChild(t={}){return{ngModule:e,providers:[{provide:Ge,multi:!0,useFactory:Ai,deps:[Ae]},{provide:Ge,useValue:t,multi:!0},Di]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=F({type:e}),e.\u0275inj=b({imports:[k]});let n=e;return n})();function En(n,e){n&1&&(d(0,"span",8),C(1,"*"),u())}function wn(n,e){if(n&1&&(d(0,"label",6),C(1),m(2,En,2,0,"span",7),u()),n&2){let r=f(2);T("for",r.id),c(),N(" ",r.props.label," "),c(),l("ngIf",r.props.required&&r.props.hideRequiredMarker!==!0)}}function On(n,e){if(n&1&&m(0,wn,3,3,"label",5),n&2){let r=f();l("ngIf",r.props.label&&r.props.hideLabel!==!0)}}function kn(n,e){if(n&1&&(se(0),Pe(1,9),ae()),n&2){f();let r=re(1);c(),l("ngTemplateOutlet",r)}}function In(n,e){}function An(n,e){if(n&1&&(se(0),Pe(1,9),ae()),n&2){f();let r=re(1);c(),l("ngTemplateOutlet",r)}}function Dn(n,e){if(n&1&&(d(0,"div",10),O(1,"formly-validation-message",11),u()),n&2){let r=f();$t("display","block"),c(),l("id",Qt("",r.id,"-formly-validation-error"))("field",r.field)}}function Mn(n,e){if(n&1&&(d(0,"small",12),C(1),u()),n&2){let r=f();c(),q(r.props.description)}}var Rn=["fieldTypeTemplate"],Tn=(()=>{let e=class e extends nt{};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=_(e)))(o||e)}})(),e.\u0275cmp=g({type:e,selectors:[["formly-wrapper-form-field"]],standalone:!1,features:[y],decls:9,vars:8,consts:[["labelTemplate",""],["fieldComponent",""],[4,"ngIf"],["class","invalid-feedback",3,"display",4,"ngIf"],["class","form-text text-muted",4,"ngIf"],["class","form-label",4,"ngIf"],[1,"form-label"],["aria-hidden","true",4,"ngIf"],["aria-hidden","true"],[3,"ngTemplateOutlet"],[1,"invalid-feedback"],["role","alert",3,"id","field"],[1,"form-text","text-muted"]],template:function(i,o){i&1&&(m(0,On,1,1,"ng-template",null,0,v),d(2,"div"),m(3,kn,2,1,"ng-container",2)(4,In,0,0,"ng-template",null,1,v)(6,An,2,1,"ng-container",2)(7,Dn,2,5,"div",3)(8,Mn,2,1,"small",4),u()),i&2&&(c(2),x("form-floating",o.props.labelPosition==="floating")("has-error",o.showError),c(),l("ngIf",o.props.labelPosition!=="floating"),c(3),l("ngIf",o.props.labelPosition==="floating"),c(),l("ngIf",o.showError),c(),l("ngIf",o.props.description))},dependencies:[K,Kt,Pi],styles:["[_nghost-%COMP%]{display:block;margin-bottom:1rem}"]});let n=e;return n})();function ji(){return{wrappers:[{name:"form-field",component:Tn}]}}var j=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=F({type:e}),e.\u0275inj=b({imports:[k,I,M.forChild(ji())]});let n=e;return n})(),H=(()=>{let e=class e extends We{set content(t){t&&this.hostContainerRef&&this.hostContainerRef.createEmbeddedView(t)}constructor(t){super(),this.hostContainerRef=t}};e.\u0275fac=function(i){return new(i||e)(S(W,8))},e.\u0275dir=ue({type:e,viewQuery:function(i,o){if(i&1&&te(Rn,7),i&2){let s;ie(s=ne())&&(o.content=s.first)}},standalone:!1,features:[y]});let n=e;return n})();function Sn(n,e){if(n&1&&O(0,"input",3),n&2){let r=f(2);x("is-invalid",r.showError),l("type",r.type)("formControl",r.formControl)("formlyAttributes",r.field),T("aria-describedby",r.id+"-formly-validation-error")("aria-invalid",r.showError)}}function Pn(n,e){if(n&1&&O(0,"input",4),n&2){let r=f(2);x("is-invalid",r.showError),l("formControl",r.formControl)("formlyAttributes",r.field),T("aria-describedby",r.id+"-formly-validation-error")("aria-invalid",r.showError)}}function jn(n,e){if(n&1&&m(0,Sn,1,7,"input",2)(1,Pn,1,6,"ng-template",null,1,v),n&2){let r=re(2),t=f();l("ngIf",t.type!=="number")("ngIfElse",r)}}var Vn=(()=>{let e=class e extends H{get type(){return this.props.type||"text"}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=_(e)))(o||e)}})(),e.\u0275cmp=g({type:e,selectors:[["formly-field-input"]],standalone:!1,features:[y],decls:2,vars:0,consts:[["fieldTypeTemplate",""],["numberTmp",""],["class","form-control",3,"type","formControl","formlyAttributes","is-invalid",4,"ngIf","ngIfElse"],[1,"form-control",3,"type","formControl","formlyAttributes"],["type","number",1,"form-control",3,"formControl","formlyAttributes"]],template:function(i,o){i&1&&m(0,jn,3,2,"ng-template",null,0,v)},dependencies:[K,Oe,Ci,Y,J,L],encapsulation:2,changeDetection:0});let n=e;return n})();function Vi(){return{types:[{name:"input",component:Vn,wrappers:["form-field"]},{name:"string",extends:"input"},{name:"number",extends:"input",defaultOptions:{props:{type:"number"}}},{name:"integer",extends:"input",defaultOptions:{props:{type:"number"}}}]}}var Ni=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=F({type:e}),e.\u0275inj=b({imports:[k,I,j,M.forChild(Vi())]});let n=e;return n})();function Nn(n,e){if(n&1&&O(0,"textarea",1),n&2){let r=f();x("is-invalid",r.showError),l("formControl",r.formControl)("cols",r.props.cols)("rows",r.props.rows)("formlyAttributes",r.field),T("aria-describedby",r.id+"-formly-validation-error")("aria-invalid",r.showError)}}var Gn=(()=>{let e=class e extends H{constructor(){super(...arguments),this.defaultOptions={props:{cols:1,rows:1}}}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=_(e)))(o||e)}})(),e.\u0275cmp=g({type:e,selectors:[["formly-field-textarea"]],standalone:!1,features:[y],decls:2,vars:0,consts:[["fieldTypeTemplate",""],[1,"form-control",3,"formControl","cols","rows","formlyAttributes"]],template:function(i,o){i&1&&m(0,Nn,1,8,"ng-template",null,0,v)},dependencies:[Oe,Y,J,L],encapsulation:2,changeDetection:0});let n=e;return n})();function Gi(){return{types:[{name:"textarea",component:Gn,wrappers:["form-field"]}]}}var Bi=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=F({type:e}),e.\u0275inj=b({imports:[k,I,j,M.forChild(Gi())]});let n=e;return n})();var Bn=(()=>{let e=class e{transform(t,i){return t instanceof Fe?this.dispose():t=this.observableOf(t,i),t.pipe(de(o=>this.transformOptions(o,i)))}ngOnDestroy(){this.dispose()}transformOptions(t,i){let o=this.transformSelectProps(i),s=[],a={};return t?.forEach(p=>{let h=this.transformOption(p,o);if(h.group){let E=a[h.label];E===void 0?a[h.label]=s.push(h)-1:h.group.forEach(U=>s[E].group.push(U))}else s.push(h)}),s}transformOption(t,i){let o=i.groupProp(t);return Array.isArray(o)?{label:i.labelProp(t),group:o.map(s=>this.transformOption(s,i))}:(t={label:i.labelProp(t),value:i.valueProp(t),disabled:!!i.disabledProp(t)},o?{label:o,group:[t]}:t)}transformSelectProps(t){let i=t?.props||t?.templateOptions||{},o=s=>typeof s=="function"?s:a=>a[s];return{groupProp:o(i.groupProp||"group"),labelProp:o(i.labelProp||"label"),valueProp:o(i.valueProp||"value"),disabledProp:o(i.disabledProp||"disabled")}}dispose(){this._options&&(this._options.complete(),this._options=null),this._subscription&&(this._subscription.unsubscribe(),this._subscription=null)}observableOf(t,i){return this.dispose(),i&&i.options&&i.options.fieldChanges&&(this._subscription=i.options.fieldChanges.pipe(qe(({property:o,type:s,field:a})=>s==="expressionChanges"&&(o.indexOf("templateOptions.options")===0||o.indexOf("props.options")===0)&&a===i&&Array.isArray(a.props.options)&&!!this._options),ze(()=>this._options.next(i.props.options))).subscribe()),this._options=new wt(t),this._options.asObservable()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275pipe=ft({name:"formlySelectOptions",type:e,pure:!0});let n=e;return n})(),De=(()=>{let e=class e extends Bn{};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=_(e)))(o||e)}})(),e.\u0275pipe=ft({name:"formlySelectOptions",type:e,pure:!0,standalone:!1});let n=e;return n})(),Me=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=F({type:e}),e.\u0275inj=b({});let n=e;return n})();function Ln(n,e){if(n&1&&(d(0,"div",2),O(1,"input",3),d(2,"label",4),C(3),u()()),n&2){let r=e.$implicit,t=e.index,i=f(2);x("form-check-inline",i.props.formCheck==="inline"),c(),x("is-invalid",i.showError),l("id",i.id+"_"+t)("name",i.field.name||i.id)("value",r.value)("formControl",r.disabled?i.disabledControl:i.formControl)("formlyAttributes",i.field),T("value",r.value)("aria-describedby",i.id+"-formly-validation-error")("aria-invalid",i.showError),c(),l("for",i.id+"_"+t),c(),N(" ",r.label," ")}}function Hn(n,e){if(n&1&&(m(0,Ln,4,14,"div",1),P(1,"formlySelectOptions"),P(2,"async")),n&2){let r=f();l("ngForOf",z(2,4,he(1,1,r.props.options,r.field)))}}var Wn=(()=>{let e=class e extends H{constructor(){super(...arguments),this.defaultOptions={props:{formCheck:"default"}}}get disabledControl(){return new et({value:this.formControl.value,disabled:!0})}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=_(e)))(o||e)}})(),e.\u0275cmp=g({type:e,selectors:[["formly-field-radio"]],standalone:!1,features:[y],decls:2,vars:0,consts:[["fieldTypeTemplate",""],["class","form-check",3,"form-check-inline",4,"ngFor","ngForOf"],[1,"form-check"],["type","radio",1,"form-check-input",3,"id","name","value","formControl","formlyAttributes"],[1,"form-check-label",3,"for"]],template:function(i,o){i&1&&m(0,Hn,3,6,"ng-template",null,0,v)},dependencies:[we,Oe,bi,Y,J,L,Z,De],encapsulation:2,changeDetection:0});let n=e;return n})();function Li(){return{types:[{name:"radio",component:Wn,wrappers:["form-field"]}]}}var Hi=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=F({type:e}),e.\u0275inj=b({imports:[k,I,j,Me,M.forChild(Li())]});let n=e;return n})();var $n=(n,e)=>({"form-check-inline":n,"form-switch":e});function Un(n,e){n&1&&(d(0,"span",6),C(1,"*"),u())}function Qn(n,e){if(n&1&&(d(0,"label",4),C(1),m(2,Un,2,0,"span",5),u()),n&2){let r=f(2);l("for",r.id),c(),N(" ",r.props.label," "),c(),l("ngIf",r.props.required&&r.props.hideRequiredMarker!==!0)}}function qn(n,e){if(n&1&&(d(0,"div",1),O(1,"input",2),m(2,Qn,3,3,"label",3),u()),n&2){let r=f();l("ngClass",Xe(11,$n,r.props.formCheck==="inline"||r.props.formCheck==="inline-switch",r.props.formCheck==="switch"||r.props.formCheck==="inline-switch")),c(),x("is-invalid",r.showError)("position-static",r.props.formCheck==="nolabel"),l("indeterminate",r.props.indeterminate&&r.formControl.value==null)("formControl",r.formControl)("formlyAttributes",r.field),T("aria-describedby",r.id+"-formly-validation-error")("aria-invalid",r.showError),c(),l("ngIf",r.props.formCheck!=="nolabel")}}var zn=(()=>{let e=class e extends H{constructor(){super(...arguments),this.defaultOptions={props:{indeterminate:!0,hideLabel:!0,formCheck:"default"}}}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=_(e)))(o||e)}})(),e.\u0275cmp=g({type:e,selectors:[["formly-field-checkbox"]],standalone:!1,features:[y],decls:2,vars:0,consts:[["fieldTypeTemplate",""],[1,"form-check",3,"ngClass"],["type","checkbox",1,"form-check-input",3,"indeterminate","formControl","formlyAttributes"],["class","form-check-label",3,"for",4,"ngIf"],[1,"form-check-label",3,"for"],["aria-hidden","true",4,"ngIf"],["aria-hidden","true"]],template:function(i,o){i&1&&m(0,qn,3,14,"ng-template",null,0,v)},dependencies:[Ee,K,gi,Y,J,L],encapsulation:2,changeDetection:0});let n=e;return n})();function Wi(){return{types:[{name:"checkbox",component:zn,wrappers:["form-field"]},{name:"boolean",extends:"checkbox"}]}}var $i=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=F({type:e}),e.\u0275inj=b({imports:[k,I,j,M.forChild(Wi())]});let n=e;return n})();var Kn=(n,e)=>({"form-check-inline":n,"form-switch":e});function Zn(n,e){if(n&1){let r=je();d(0,"div",2)(1,"input",3),le("change",function(i){let o=Re(r).$implicit,s=f(2);return Te(s.onChange(o.value,i.target.checked))}),u(),d(2,"label",4),C(3),u()()}if(n&2){let r=e.$implicit,t=e.index,i=f(2);l("ngClass",Xe(12,Kn,i.props.formCheck==="inline"||i.props.formCheck==="inline-switch",i.props.formCheck==="switch"||i.props.formCheck==="inline-switch")),c(),x("is-invalid",i.showError),l("id",i.id+"_"+t)("value",r.value)("checked",i.isChecked(r))("formlyAttributes",i.field)("disabled",i.formControl.disabled||r.disabled),T("aria-describedby",i.id+"-formly-validation-error")("aria-invalid",i.showError),c(),l("for",i.id+"_"+t),c(),N(" ",r.label," ")}}function Xn(n,e){if(n&1&&(m(0,Zn,4,15,"div",1),P(1,"formlySelectOptions"),P(2,"async")),n&2){let r=f();l("ngForOf",z(2,4,he(1,1,r.props.options,r.field)))}}var Yn=(()=>{let e=class e extends H{constructor(){super(...arguments),this.defaultOptions={props:{formCheck:"default"}}}onChange(t,i){this.formControl.markAsDirty(),this.props.type==="array"?this.formControl.patchValue(i?[...this.formControl.value||[],t]:[...this.formControl.value||[]].filter(o=>o!==t)):this.formControl.patchValue(fe(V({},this.formControl.value),{[t]:i})),this.formControl.markAsTouched()}isChecked(t){let i=this.formControl.value;return i&&(this.props.type==="array"?i.indexOf(t.value)!==-1:i[t.value])}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=_(e)))(o||e)}})(),e.\u0275cmp=g({type:e,selectors:[["formly-field-multicheckbox"]],standalone:!1,features:[y],decls:2,vars:0,consts:[["fieldTypeTemplate",""],["class","form-check",3,"ngClass",4,"ngFor","ngForOf"],[1,"form-check",3,"ngClass"],["type","checkbox",1,"form-check-input",3,"change","id","value","checked","formlyAttributes","disabled"],[1,"form-check-label",3,"for"]],template:function(i,o){i&1&&m(0,Xn,3,6,"ng-template",null,0,v)},dependencies:[Ee,we,L,Z,De],encapsulation:2,changeDetection:0});let n=e;return n})();function Ui(){return{types:[{name:"multicheckbox",component:Yn,wrappers:["form-field"]}]}}var Qi=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=F({type:e}),e.\u0275inj=b({imports:[k,I,j,Me,M.forChild(Ui())]});let n=e;return n})();function Jn(n,e){if(n&1&&(d(0,"option",8),C(1),u()),n&2){let r=f().$implicit;l("ngValue",r.value)("disabled",r.disabled),c(),N(" ",r.label," ")}}function er(n,e){if(n&1&&(d(0,"option",8),C(1),u()),n&2){let r=e.$implicit;l("ngValue",r.value)("disabled",r.disabled),c(),N(" ",r.label," ")}}function tr(n,e){if(n&1&&(d(0,"optgroup",9),m(1,er,2,3,"option",10),u()),n&2){let r=f().$implicit;l("label",r.label),c(),l("ngForOf",r.group)}}function ir(n,e){if(n&1&&(se(0),m(1,Jn,2,3,"option",7)(2,tr,2,2,"ng-template",null,2,v),ae()),n&2){let r=e.$implicit,t=re(3);c(),l("ngIf",!r.group)("ngIfElse",t)}}function nr(n,e){if(n&1&&(se(0),m(1,ir,4,2,"ng-container",6),ae()),n&2){let r=e.ngIf;c(),l("ngForOf",r)}}function rr(n,e){if(n&1&&(d(0,"select",4),m(1,nr,2,1,"ng-container",5),P(2,"formlySelectOptions"),P(3,"async"),u()),n&2){let r=f(2);x("is-invalid",r.showError),l("formControl",r.formControl)("compareWith",r.props.compareWith)("formlyAttributes",r.field),T("aria-describedby",r.id+"-formly-validation-error")("aria-invalid",r.showError),c(),l("ngIf",z(3,11,he(2,8,r.props.options,r.field)))}}function or(n,e){if(n&1&&(d(0,"option",13),C(1),u()),n&2){let r=f(3);l("ngValue",void 0),c(),q(r.props.placeholder)}}function sr(n,e){if(n&1&&(d(0,"option",8),C(1),u()),n&2){let r=f().$implicit;l("ngValue",r.value)("disabled",r.disabled),c(),N(" ",r.label," ")}}function ar(n,e){if(n&1&&(d(0,"option",8),C(1),u()),n&2){let r=e.$implicit;l("ngValue",r.value)("disabled",r.disabled),c(),N(" ",r.label," ")}}function lr(n,e){if(n&1&&(d(0,"optgroup",9),m(1,ar,2,3,"option",10),u()),n&2){let r=f().$implicit;l("label",r.label),c(),l("ngForOf",r.group)}}function pr(n,e){if(n&1&&(se(0),m(1,sr,2,3,"option",7)(2,lr,2,2,"ng-template",null,2,v),ae()),n&2){let r=e.$implicit,t=re(3);c(),l("ngIf",!r.group)("ngIfElse",t)}}function cr(n,e){if(n&1&&(se(0),m(1,pr,4,2,"ng-container",6),ae()),n&2){let r=e.ngIf;c(),l("ngForOf",r)}}function fr(n,e){if(n&1&&(d(0,"select",11),m(1,or,2,2,"option",12)(2,cr,2,1,"ng-container",5),P(3,"formlySelectOptions"),P(4,"async"),u()),n&2){let r=f(2);x("is-invalid",r.showError),l("formControl",r.formControl)("compareWith",r.props.compareWith)("formlyAttributes",r.field),T("aria-describedby",r.id+"-formly-validation-error")("aria-invalid",r.showError),c(),l("ngIf",r.props.placeholder),c(),l("ngIf",z(4,12,he(3,9,r.props.options,r.field)))}}function mr(n,e){if(n&1&&m(0,rr,4,13,"select",3)(1,fr,5,14,"ng-template",null,1,v),n&2){let r=re(2),t=f();l("ngIf",t.props.multiple)("ngIfElse",r)}}var dr=(()=>{let e=class e extends H{constructor(){super(...arguments),this.defaultOptions={props:{compareWith(t,i){return t===i}}}}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=_(e)))(o||e)}})(),e.\u0275cmp=g({type:e,selectors:[["formly-field-select"]],standalone:!1,features:[y],decls:2,vars:0,consts:[["fieldTypeTemplate",""],["singleSelect",""],["optgroup",""],["class","form-select","multiple","",3,"formControl","compareWith","is-invalid","formlyAttributes",4,"ngIf","ngIfElse"],["multiple","",1,"form-select",3,"formControl","compareWith","formlyAttributes"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngValue","disabled",4,"ngIf","ngIfElse"],[3,"ngValue","disabled"],[3,"label"],[3,"ngValue","disabled",4,"ngFor","ngForOf"],[1,"form-select",3,"formControl","compareWith","formlyAttributes"],[3,"ngValue",4,"ngIf"],[3,"ngValue"]],template:function(i,o){i&1&&m(0,mr,3,2,"ng-template",null,0,v)},dependencies:[we,K,xi,wi,Fi,Ei,Y,J,L,Z,De],encapsulation:2,changeDetection:0});let n=e;return n})();function qi(){return{types:[{name:"select",component:dr,wrappers:["form-field"]},{name:"enum",extends:"select"}]}}var zi=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=F({type:e}),e.\u0275inj=b({imports:[k,I,j,Me,M.forChild(qi())]});let n=e;return n})();var ur=["fieldTypeTemplate"];function hr(n,e){if(n&1&&O(0,"i",7),n&2){let r=f(3);l("ngClass",r.props.addonLeft.class)}}function gr(n,e){if(n&1&&(d(0,"span"),C(1),u()),n&2){let r=f(3);c(),q(r.props.addonLeft.text)}}function yr(n,e){if(n&1){let r=je();d(0,"div",4),le("click",function(i){Re(r);let o=f(2);return Te(o.addonLeftClick(i))}),m(1,hr,1,1,"i",5)(2,gr,2,1,"span",6),u()}if(n&2){let r=f(2);x("input-group-btn",r.props.addonLeft.onClick),c(),l("ngIf",r.props.addonLeft.class),c(),l("ngIf",r.props.addonLeft.text)}}function vr(n,e){if(n&1&&O(0,"i",7),n&2){let r=f(3);l("ngClass",r.props.addonRight.class)}}function Cr(n,e){if(n&1&&(d(0,"span"),C(1),u()),n&2){let r=f(3);c(),q(r.props.addonRight.text)}}function br(n,e){if(n&1){let r=je();d(0,"div",4),le("click",function(i){Re(r);let o=f(2);return Te(o.addonRightClick(i))}),m(1,vr,1,1,"i",5)(2,Cr,2,1,"span",6),u()}if(n&2){let r=f(2);x("input-group-btn",r.props.addonRight.onClick),c(),l("ngIf",r.props.addonRight.class),c(),l("ngIf",r.props.addonRight.text)}}function _r(n,e){if(n&1&&(d(0,"div",2),m(1,yr,3,4,"div",3),Pe(2,null,1),m(4,br,3,4,"div",3),u()),n&2){let r=f();x("has-validation",r.showError),c(),l("ngIf",r.props.addonLeft),c(3),l("ngIf",r.props.addonRight)}}var Fr=(()=>{let e=class e extends nt{set content(t){t&&this.hostContainerRef&&this.hostContainerRef.createEmbeddedView(t)}constructor(t){super(),this.hostContainerRef=t}addonRightClick(t){this.props.addonRight.onClick?.(this.field,t)}addonLeftClick(t){this.props.addonLeft.onClick?.(this.field,t)}};e.\u0275fac=function(i){return new(i||e)(S(W))},e.\u0275cmp=g({type:e,selectors:[["formly-wrapper-addons"]],viewQuery:function(i,o){if(i&1&&te(ur,7),i&2){let s;ie(s=ne())&&(o.content=s.first)}},standalone:!1,features:[y],decls:2,vars:0,consts:[["fieldTypeTemplate",""],["fieldComponent",""],[1,"input-group"],["class","input-group-text",3,"input-group-btn","click",4,"ngIf"],[1,"input-group-text",3,"click"],[3,"ngClass",4,"ngIf"],[4,"ngIf"],[3,"ngClass"]],template:function(i,o){i&1&&m(0,_r,5,4,"ng-template",null,0,v)},dependencies:[Ee,K],styles:[`formly-wrapper-form-field .input-group-btn{cursor:pointer}
`],encapsulation:2});let n=e;return n})();function xr(n){!n.props||n.wrappers&&n.wrappers.indexOf("addons")!==-1||(n.props.addonLeft||n.props.addonRight)&&(n.wrappers=[...n.wrappers||[],"addons"])}function Ki(){return{wrappers:[{name:"addons",component:Fr}],extensions:[{name:"addons",extension:{postPopulate:xr}}]}}var Zi=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=F({type:e}),e.\u0275inj=b({imports:[k,I,M.forChild(Ki())]});let n=e;return n})();var Xi=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=F({type:e}),e.\u0275inj=b({imports:[j,Ni,Bi,Hi,$i,Qi,zi,Zi]});let n=e;return n})();var Yi={production:!1,firebase:{apiKey:"AIzaSyB8wAgN-sgQaBybaaVAw9sXUDs5Z6r7Wcw",authDomain:"kanban-gobuyer.firebaseapp.com",projectId:"kanban-gobuyer",storageBucket:"kanban-gobuyer.firebasestorage.app",messagingSenderId:"269726968959",appId:"1:269726968959:web:6aaf53ba4f7bf6b64d39c9"}};var rt=class n{companyService=B(tt);intercept(e,r){let t=this.companyService.getCompanySubdomain();if(t&&e.url.includes("/api/")){let i=e.clone({setHeaders:{"X-Company-Subdomain":t}});return r.handle(i)}return r.handle(e)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=oe({token:n,factory:n.\u0275fac})};var _e=(n,e)=>{let r=B(Oi),t=B(Je);return r.isAuthenticated().pipe(de(i=>i?!0:(t.navigate(["/login"]),!1)))};var ee=class n{subdomainService=B(ge);router=B(Je);canActivate(){return new Fe(e=>{this.subdomainService.isInitialized$.subscribe(r=>{if(r)if(this.subdomainService.getCurrentCompany())e.next(!0),e.complete();else{let i=this.router.url;i==="/login"||i==="/"||i.startsWith("/form")?(e.next(!0),e.complete()):(this.handleNoCompany(),e.next(!1),e.complete())}else this.subdomainService.initializeFromSubdomain().then(t=>Ue(this,null,function*(){if(t)e.next(!0);else{let i=this.router.url;i==="/login"||i==="/"||i.startsWith("/login?")||i.startsWith("/form")?e.next(!0):(this.handleNoCompany(),e.next(!1))}e.complete()})).catch(t=>{console.error("Erro ao inicializar guard da empresa:",t);let i=this.router.url;i==="/login"||i==="/"||i.startsWith("/login?")||i.startsWith("/form")?e.next(!0):(this.handleError(t),e.next(!1)),e.complete()})})})}handleNoCompany(){}handleError(e){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ji=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"form",loadComponent:()=>import("./chunk-Y5L5QHSI.js").then(n=>n.PublicFormComponent)},{path:"login",loadComponent:()=>import("./chunk-3U3ZAZZF.js").then(n=>n.LoginComponent),canActivate:[ee]},{path:"dashboard",loadComponent:()=>import("./chunk-MVHBJOL5.js").then(n=>n.DashboardComponent),canActivate:[ee,_e]},{path:"kanban/:boardId",loadComponent:()=>import("./chunk-CDJUUHRZ.js").then(n=>n.KanbanComponent),canActivate:[ee,_e]},{path:"usuarios",loadComponent:()=>import("./chunk-6Y4AJDRP.js").then(n=>n.UserManagementComponent),canActivate:[ee,_e]},{path:"empresa/branding",loadComponent:()=>import("./chunk-4NJFPLPX.js").then(n=>n.BrandingConfigComponent),canActivate:[ee,_e]},{path:"empresa/smtp",loadComponent:()=>import("./chunk-L2BSUSR5.js").then(n=>n.SmtpConfigComponent),canActivate:[ee,_e]},{path:"empresa/integracoes",loadComponent:()=>import("./chunk-NSW26K2Y.js").then(n=>n.ApiLinksConfigComponent),canActivate:[ee,_e]},{path:"empresa-nao-encontrada",loadComponent:()=>import("./chunk-FGZN6UCG.js").then(n=>n.CompanyNotFoundComponent)},{path:"**",redirectTo:"/login"}];function Er(n,e,r){return()=>new Promise(t=>{setTimeout(()=>{let i=e.getCurrentCompany()||e.restorePersistedCompany();if(!i){r.getCompanyBySubdomain(r.getCompanySubdomain()||"").then(o=>{o&&(e.setCurrentCompany(o),n.applyCompanyBranding(o)),t()}).catch(()=>t());return}i&&i.brandingConfig&&n.applyCompanyBranding(i),t()},200)})}function ot(){try{if(typeof window>"u")return!1;let n=(window.localStorage?.getItem("useEmulators")||"").toLowerCase();return n==="1"||n==="true"||n==="yes"}catch{return!1}}var en={providers:[St(),qt({eventCoalescing:!0}),ti(Ji),Yt(),ii(()=>ni(Yi.firebase)),ri(()=>{let n=si();return ot()&&oi(n,"http://127.0.0.1:9099",{disableWarnings:!0}),n}),ai(()=>{let n=pi();return ot()&&li(n,"127.0.0.1",8080),n}),ci(()=>{let n=mi();return ot()&&fi(n,"127.0.0.1",9199),n}),di(()=>{let n=hi();return ot()&&ui(n,"127.0.0.1",5001),n}),{provide:Nt,useFactory:Er,deps:[Ne,ge,tt],multi:!0},{provide:Xt,useClass:rt,multi:!0},Mt(I,M.forRoot({validationMessages:[{name:"required",message:"Este campo \xE9 obrigat\xF3rio"}]}),Xi),Ne,ge]};var st=class n{subdomainService=B(ge);firestoreService=B(ki);brandingService=B(Ne);title=Pt("Sistema Kanban");ngOnInit(){return Ue(this,null,function*(){try{let e=yield this.subdomainService.initializeFromSubdomain();e?(this.firestoreService.setCompanyContext(e),this.title.set(`${e.name} - Sistema Kanban`),this.updatePageTitle(e.name),this.brandingService.applyCompanyBranding(e)):this.title.set("Sistema Kanban - Login")}catch{}})}updatePageTitle(e){typeof document<"u"&&(document.title=`${e} - Sistema Kanban`)}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=g({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(r,t){r&1&&O(0,"router-outlet")},dependencies:[ei],encapsulation:2})};Zt(st,en).catch(n=>console.error(n));
