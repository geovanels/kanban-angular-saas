import{a as G}from"./chunk-LR3ASTNU.js";import{a as O}from"./chunk-XILAYBYU.js";import{a as q}from"./chunk-UHZZH6SA.js";import"./chunk-Z6YHNIQS.js";import{I as W,i as L,l as I,s as A}from"./chunk-NQFRU3X2.js";import"./chunk-C6QB7HLZ.js";import{F as z,G as j,I as R}from"./chunk-4NYDEC32.js";import{Bb as N,Cb as D,Db as y,Eb as n,Fb as i,Gb as c,Nb as v,Pb as g,Rb as C,Ua as T,Wc as F,Xa as s,Xb as U,Yb as x,a as V,ac as o,bc as k,cc as E,f as h,fa as w,fb as P,fc as S,gc as B,hc as M,la as p,ma as u,va as f,yb as b,zb as _}from"./chunk-JXP376XN.js";var J=(l,t)=>t.name;function Z(l,t){l&1&&(c(0,"i",53),o(1," Salvando... "))}function K(l,t){l&1&&(c(0,"i",54),o(1," Salvar Configura\xE7\xF5es "))}function Q(l,t){if(l&1&&(n(0,"div",4),c(1,"i",55),o(2),i()),l&2){let r=C();s(2),E(" ",r.successMessage()," ")}}function X(l,t){if(l&1&&(n(0,"div",5),c(1,"i",56),o(2),i()),l&2){let r=C();s(2),E(" ",r.errorMessage()," ")}}function Y(l,t){if(l&1&&c(0,"img",15),l&2){let r=C();y("src",r.logoUrl(),T)}}function $(l,t){l&1&&(n(0,"div",16),c(1,"i",57),i())}function ee(l,t){if(l&1&&(c(0,"img",58),n(1,"p",59),o(2,"Clique para alterar o logo"),i()),l&2){let r=C();y("src",r.logoUrl(),T)}}function te(l,t){l&1&&(c(0,"i",60),n(1,"p",59),o(2,"Clique para fazer upload do logo"),i(),n(3,"p",41),o(4,"PNG, JPG ou SVG - M\xE1x. 5MB"),i())}function ne(l,t){if(l&1){let r=v();n(0,"button",61),g("click",function(){p(r);let a=C();return u(a.removeLogo())}),c(1,"i",62),o(2," Remover Logo "),i()}}function ie(l,t){if(l&1){let r=v();n(0,"button",63),g("click",function(){let a=p(r).$implicit,d=C();return u(d.applyColorPreset(a))}),i()}if(l&2){let r=t.$implicit;x("background-color",r.primary),y("title",r.name)}}function re(l,t){if(l&1){let r=v();n(0,"div",51)(1,"div",64)(2,"h3",65),c(3,"i",66),o(4," Zona Perigosa "),i(),n(5,"p",67),o(6," A exclus\xE3o da empresa \xE9 permanente e n\xE3o pode ser desfeita. Todos os dados, quadros, leads e usu\xE1rios ser\xE3o perdidos. "),i()(),n(7,"div",11)(8,"button",68),g("click",function(){p(r);let a=C();return u(a.showDeleteModal())}),c(9,"i",62),o(10," Excluir Empresa Permanentemente "),i()()()}}function oe(l,t){if(l&1&&(n(0,"div",79),c(1,"i",56),o(2),i()),l&2){let r=C(2);s(2),E(" ",r.deleteError()," ")}}function ae(l,t){l&1&&(c(0,"i",53),o(1," Excluindo... "))}function le(l,t){l&1&&(c(0,"i",62),o(1," Excluir Permanentemente "))}function se(l,t){if(l&1){let r=v();n(0,"div",52)(1,"div",69)(2,"div",70)(3,"div",71)(4,"h3",8),c(5,"i",72),o(6," Confirmar Exclus\xE3o "),i(),n(7,"button",73),g("click",function(){p(r);let a=C();return u(a.hideDeleteModal())}),c(8,"i",74),i()(),n(9,"div",75)(10,"strong"),o(11,"ATEN\xC7\xC3O:"),i(),o(12," Esta a\xE7\xE3o n\xE3o pode ser desfeita! "),i(),n(13,"p",76),o(14,"Voc\xEA est\xE1 prestes a excluir permanentemente:"),i(),n(15,"ul",77)(16,"li"),o(17,"Empresa: "),n(18,"strong"),o(19),i()(),n(20,"li"),o(21,"Todos os quadros e leads"),i(),n(22,"li"),o(23,"Todos os usu\xE1rios associados"),i(),n(24,"li"),o(25,"Todas as configura\xE7\xF5es e dados"),i()(),n(26,"p",76),o(27," Para confirmar, digite "),n(28,"strong"),o(29),i(),o(30," abaixo: "),i(),n(31,"input",78),M("ngModelChange",function(a){p(r);let d=C();return B(d.deleteConfirmation,a)||(d.deleteConfirmation=a),u(a)}),g("input",function(a){p(r);let d=C();return u(d.deleteConfirmation.set(a.target.value))}),i(),b(32,oe,3,1,"div",79),n(33,"div",38)(34,"button",80),g("click",function(){p(r);let a=C();return u(a.hideDeleteModal())}),o(35," Cancelar "),i(),n(36,"button",81),g("click",function(){p(r);let a=C();return u(a.deleteCompany())}),b(37,ae,2,0)(38,le,2,0),i()()()()()}if(l&2){let r,e,a,d=C();s(19),k((r=d.currentCompany())==null?null:r.name),s(10),k((e=d.currentCompany())==null?null:e.name),s(2),S("ngModel",d.deleteConfirmation),y("value",d.deleteConfirmation()),s(),_(d.deleteError()?32:-1),s(2),y("disabled",d.deleteLoading()),s(2),y("disabled",d.deleteLoading()||d.deleteConfirmation()!==((a=d.currentCompany())==null?null:a.name)),s(),_(d.deleteLoading()?37:38)}}var H=class l{companyService=w(R);subdomainService=w(z);brandingService=w(O);authService=w(j);currentCompany=f(null);primaryColor=f("#3B82F6");secondaryColor=f("#6B7280");logoUrl=f("");companyName=f("");isSaving=f(!1);successMessage=f(null);errorMessage=f(null);showDeleteConfirmation=f(!1);deleteConfirmation=f("");deleteLoading=f(!1);deleteError=f(null);colorPresets=[{name:"Azul",primary:"#3B82F6",secondary:"#6B7280"},{name:"Verde",primary:"#10B981",secondary:"#6B7280"},{name:"Vermelho",primary:"#EF4444",secondary:"#6B7280"},{name:"Roxo",primary:"#8B5CF6",secondary:"#6B7280"},{name:"Laranja",primary:"#F59E0B",secondary:"#6B7280"},{name:"Rosa",primary:"#EC4899",secondary:"#6B7280"}];ngOnInit(){return h(this,null,function*(){yield this.loadCurrentBranding()})}loadCurrentBranding(){return h(this,null,function*(){let t=this.subdomainService.getCurrentCompany();if(!t)try{t=yield this.subdomainService.initializeFromSubdomain()}catch{let e=this.authService.getCurrentUser();if(e?.uid)try{let a=yield this.companyService.getCompaniesByOwner(e.uid);a.length>0&&(t=a[0],this.subdomainService.setCurrentCompany(t))}catch(a){console.error("Erro ao buscar empresas do usu\xE1rio:",a)}}t&&(this.currentCompany.set(t),this.primaryColor.set(t.brandingConfig?.primaryColor||"#3B82F6"),this.secondaryColor.set(t.brandingConfig?.secondaryColor||"#6B7280"),this.logoUrl.set(t.brandingConfig?.logo||""),this.companyName.set(t.name||""))})}saveConfiguration(){return h(this,null,function*(){let t=this.currentCompany();if(!t)try{let r=this.companyService.getCompanySubdomain();if(r){let e=yield this.companyService.getCompanyBySubdomain(r);e&&(this.subdomainService.setCurrentCompany(e),this.currentCompany.set(e),t=e)}}catch{}if(!t)try{let r=this.authService.getCurrentUser();if(r?.email){let e=yield this.companyService.getCompanyByUserEmail(r.email);e&&(this.subdomainService.setCurrentCompany(e),this.currentCompany.set(e),t=e)}}catch{}if(!t){this.showError("Empresa n\xE3o encontrada");return}this.isSaving.set(!0),this.clearMessages();try{let r={name:this.companyName(),brandingConfig:{primaryColor:this.primaryColor(),secondaryColor:this.secondaryColor(),logo:this.logoUrl(),favicon:t.brandingConfig?.favicon||"",customCSS:t.brandingConfig?.customCSS||"",companyName:this.companyName()}};yield this.companyService.updateCompany(t.id,r);let e=V(V({},t),r);this.subdomainService.setCurrentCompany(e),this.currentCompany.set(e),yield this.brandingService.updateColors({primaryColor:this.primaryColor(),secondaryColor:this.secondaryColor()}),this.showSuccess("Configura\xE7\xF5es de branding salvas com sucesso!")}catch(r){console.error("Erro ao salvar configura\xE7\xF5es de branding:",r),this.showError("Erro ao salvar configura\xE7\xF5es. Tente novamente.")}finally{this.isSaving.set(!1)}})}onLogoSelected(t){let r=t.target.files[0];if(r){let e=new FileReader;e.onload=a=>{this.logoUrl.set(a.target?.result)},e.readAsDataURL(r)}}removeLogo(){confirm("Tem certeza que deseja remover o logo?")&&this.logoUrl.set("")}applyColorPreset(t){this.primaryColor.set(t.primary),this.secondaryColor.set(t.secondary),this.applyPreviewColors()}resetColors(){this.primaryColor.set("#3B82F6"),this.secondaryColor.set("#6B7280")}getContrastColor(t){if(!t)return"#000000";let r=t.replace("#",""),e=parseInt(r.substr(0,2),16),a=parseInt(r.substr(2,2),16),d=parseInt(r.substr(4,2),16);return(.299*e+.587*a+.114*d)/255>.5?"#000000":"#FFFFFF"}applyBrandingToPage(){document.documentElement.style.setProperty("--primary-color",this.primaryColor()),document.documentElement.style.setProperty("--secondary-color",this.secondaryColor())}canDeleteCompany(){let t=this.authService.getCurrentUser(),r=this.currentCompany();return!t||!r?!1:r.ownerEmail===t.email}deleteCompany(){return h(this,null,function*(){let t=this.currentCompany(),r=this.deleteConfirmation().trim();if(!t||r!==t.name){this.deleteError.set("Digite exatamente o nome da empresa para confirmar");return}this.deleteLoading.set(!0),this.deleteError.set(null);try{yield this.companyService.deleteCompany(t.id),yield this.authService.logout(),window.location.href="/login"}catch(e){console.error("Erro ao excluir empresa:",e),this.deleteError.set("Erro ao excluir empresa. Tente novamente.")}finally{this.deleteLoading.set(!1)}})}showDeleteModal(){this.showDeleteConfirmation.set(!0),this.deleteConfirmation.set(""),this.deleteError.set(null)}hideDeleteModal(){this.showDeleteConfirmation.set(!1),this.deleteConfirmation.set(""),this.deleteError.set(null)}applyPreviewColors(){this.brandingService.updateColors({primaryColor:this.primaryColor(),secondaryColor:this.secondaryColor()}).catch(t=>{this.applyBrandingToPage()})}showSuccess(t){this.successMessage.set(t),this.errorMessage.set(null),setTimeout(()=>this.successMessage.set(null),5e3)}showError(t){this.errorMessage.set(t),this.successMessage.set(null),setTimeout(()=>this.errorMessage.set(null),5e3)}clearMessages(){this.successMessage.set(null),this.errorMessage.set(null)}static \u0275fac=function(r){return new(r||l)};static \u0275cmp=P({type:l,selectors:[["app-branding-config"]],decls:103,vars:36,consts:[["logoInput",""],["title","Minha Empresa"],[1,"bg-green-500","hover:bg-green-600","text-white","px-4","py-2","rounded-lg","text-sm","font-medium","transition-colors",3,"click","disabled"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8","py-8"],[1,"mb-6","p-4","bg-green-50","border","border-green-200","rounded-lg","text-green-800"],[1,"mb-6","p-4","bg-red-50","border","border-red-200","rounded-lg","text-red-800"],[1,"bg-white","rounded-lg","shadow-sm","border","border-gray-200","mb-8"],[1,"p-6","border-b","border-gray-200"],[1,"text-lg","font-semibold","text-gray-900","flex","items-center"],[1,"fas","fa-eye","text-blue-500","mr-2"],[1,"text-sm","text-gray-600","mt-1"],[1,"p-6"],[1,"border","border-gray-300","rounded-lg","p-6","bg-gray-50"],[1,"flex","items-center","justify-between","p-4","bg-white","rounded","border","border-gray-200","mb-4"],[1,"flex","items-center","space-x-3"],["alt","Logo Preview",1,"h-8","w-auto",3,"src"],[1,"h-8","w-8","bg-gray-300","rounded","flex","items-center","justify-center"],[1,"text-lg","font-semibold"],[1,"flex","space-x-2"],[1,"px-3","py-1","rounded","text-sm","font-medium"],[1,"px-3","py-1","rounded","text-sm","font-medium","text-white"],[1,"bg-white","rounded","border","border-gray-200","p-4"],[1,"font-semibold","mb-2"],[1,"text-gray-600","text-sm","mb-3"],[1,"px-2","py-1","rounded","text-xs","font-medium"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-8"],[1,"bg-white","rounded-lg","shadow-sm","border","border-gray-200"],[1,"fas","fa-image","text-blue-500","mr-2"],[1,"mb-6"],[1,"border-2","border-dashed","border-gray-300","rounded-lg","p-8","text-center","hover:border-blue-400","transition-colors","cursor-pointer",3,"click"],["type","file","accept","image/*",1,"hidden",3,"change"],[1,"space-y-3"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","url","placeholder","https://exemplo.com/logo.png",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","input","ngModel"],[1,"w-full","bg-red-500","hover:bg-red-600","text-white","px-4","py-2","rounded-md","text-sm","font-medium","transition-colors"],[1,"fas","fa-palette","text-blue-500","mr-2"],[1,"p-6","space-y-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"flex","space-x-3"],["type","color",1,"w-12","h-10","border","border-gray-300","rounded","cursor-pointer",3,"input","value"],["type","text","placeholder","#3B82F6",1,"flex-1","px-3","py-2","border","border-gray-300","rounded-md","focus:ring-blue-500","focus:border-blue-500",3,"input","value"],[1,"text-xs","text-gray-500","mt-1"],["type","text","placeholder","#6B7280",1,"flex-1","px-3","py-2","border","border-gray-300","rounded-md","focus:ring-blue-500","focus:border-blue-500",3,"input","value"],[1,"flex","space-x-2","flex-wrap","gap-2"],["type","button",1,"w-8","h-8","rounded-full","border-2","border-white","shadow-sm","hover:scale-110","transition-transform",3,"background-color","title"],[1,"pt-4","border-t","border-gray-200"],["type","button",1,"w-full","bg-gray-500","hover:bg-gray-600","text-white","px-4","py-2","rounded-md","text-sm","font-medium","transition-colors",3,"click"],[1,"fas","fa-undo","mr-1"],[1,"mt-8","bg-white","rounded-lg","shadow-sm","border","border-gray-200"],[1,"fas","fa-building","text-blue-500","mr-2"],["type","text","placeholder","Nome da sua empresa",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","input","ngModel"],[1,"mt-8","bg-white","rounded-lg","shadow-sm","border","border-red-200"],[1,"fixed","inset-0","bg-gray-600","bg-opacity-50","overflow-y-auto","h-full","w-full","z-50"],[1,"fas","fa-spinner","fa-spin","mr-1"],[1,"fas","fa-save","mr-1"],[1,"fas","fa-check-circle","mr-2"],[1,"fas","fa-exclamation-circle","mr-2"],[1,"fas","fa-image","text-gray-500"],["alt","Logo atual",1,"max-h-20","mx-auto","mb-4",3,"src"],[1,"text-sm","text-gray-600"],[1,"fas","fa-cloud-upload-alt","text-4xl","text-gray-400","mb-4"],[1,"w-full","bg-red-500","hover:bg-red-600","text-white","px-4","py-2","rounded-md","text-sm","font-medium","transition-colors",3,"click"],[1,"fas","fa-trash","mr-1"],["type","button",1,"w-8","h-8","rounded-full","border-2","border-white","shadow-sm","hover:scale-110","transition-transform",3,"click","title"],[1,"p-6","bg-red-50","rounded-t-lg","border-b","border-red-200"],[1,"text-lg","font-semibold","text-red-800","flex","items-center"],[1,"fas","fa-exclamation-triangle","mr-2"],[1,"text-sm","text-red-700","mt-1"],[1,"bg-red-600","hover:bg-red-700","text-white","px-4","py-2","rounded-md","text-sm","font-medium","transition-colors",3,"click"],[1,"relative","top-20","mx-auto","p-5","border","w-96","shadow-lg","rounded-md","bg-white"],[1,"mt-3"],[1,"flex","items-center","justify-between","mb-4"],[1,"fas","fa-exclamation-triangle","text-red-500","mr-2"],[1,"text-gray-400","hover:text-gray-600",3,"click"],[1,"fas","fa-times"],[1,"mb-4","p-3","bg-red-50","border","border-red-200","rounded"],[1,"text-sm","text-gray-600","mb-4"],[1,"text-sm","text-gray-600","mb-4","list-disc","list-inside"],["type","text","placeholder","Nome da empresa",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:ring-red-500","focus:border-red-500","mb-4",3,"ngModelChange","input","ngModel","value"],[1,"mb-4","p-3","bg-red-50","border","border-red-200","rounded","text-red-800"],[1,"flex-1","bg-gray-500","hover:bg-gray-600","text-white","px-4","py-2","rounded-md","text-sm","font-medium","transition-colors",3,"click","disabled"],[1,"flex-1","bg-red-600","hover:bg-red-700","text-white","px-4","py-2","rounded-md","text-sm","font-medium","transition-colors",3,"click","disabled"]],template:function(r,e){if(r&1){let a=v();n(0,"app-main-layout")(1,"app-config-header",1)(2,"button",2),g("click",function(){return p(a),u(e.saveConfiguration())}),b(3,Z,2,0)(4,K,2,0),i()(),n(5,"div",3),b(6,Q,3,1,"div",4),b(7,X,3,1,"div",5),n(8,"div",6)(9,"div",7)(10,"h3",8),c(11,"i",9),o(12," Preview da Identidade Visual "),i(),n(13,"p",10),o(14,"Veja como ficar\xE1 a apar\xEAncia do sistema"),i()(),n(15,"div",11)(16,"div",12)(17,"div",13)(18,"div",14),b(19,Y,1,1,"img",15)(20,$,2,0,"div",16),n(21,"h2",17),o(22),i()(),n(23,"div",18)(24,"button",19),o(25," Bot\xE3o Secund\xE1rio "),i(),n(26,"button",20),o(27," Bot\xE3o Principal "),i()()(),n(28,"div",21)(29,"h3",22),o(30,"Sample Content"),i(),n(31,"p",23),o(32,"Este \xE9 um exemplo de como o conte\xFAdo aparecer\xE1 com suas cores personalizadas."),i(),n(33,"div",18)(34,"span",24),o(35," Tag Principal "),i(),n(36,"span",24),o(37," Tag Secund\xE1ria "),i()()()()()(),n(38,"div",25)(39,"div",26)(40,"div",7)(41,"h3",8),c(42,"i",27),o(43," Logo da Empresa "),i()(),n(44,"div",11)(45,"div",28)(46,"div",29),g("click",function(){p(a);let m=U(50);return u(m.click())}),b(47,ee,3,1)(48,te,5,0),i(),n(49,"input",30,0),g("change",function(m){return p(a),u(e.onLogoSelected(m))}),i()(),n(51,"div",31)(52,"div")(53,"label",32),o(54,"URL do Logo (opcional)"),i(),n(55,"input",33),M("ngModelChange",function(m){return p(a),B(e.logoUrl,m)||(e.logoUrl=m),u(m)}),g("input",function(m){return p(a),u(e.logoUrl.set(m.target.value))}),i()(),b(56,ne,3,0,"button",34),i()()(),n(57,"div",26)(58,"div",7)(59,"h3",8),c(60,"i",35),o(61," Cores da Empresa "),i()(),n(62,"div",36)(63,"div")(64,"label",37),o(65,"Cor Principal"),i(),n(66,"div",38)(67,"input",39),g("input",function(m){return p(a),e.primaryColor.set(m.target.value),u(e.applyPreviewColors())}),i(),n(68,"input",40),g("input",function(m){return p(a),e.primaryColor.set(m.target.value),u(e.applyPreviewColors())}),i()(),n(69,"p",41),o(70,"Cor principal da interface (bot\xF5es, links, etc.)"),i()(),n(71,"div")(72,"label",37),o(73,"Cor Secund\xE1ria"),i(),n(74,"div",38)(75,"input",39),g("input",function(m){return p(a),e.secondaryColor.set(m.target.value),u(e.applyPreviewColors())}),i(),n(76,"input",42),g("input",function(m){return p(a),e.secondaryColor.set(m.target.value),u(e.applyPreviewColors())}),i()(),n(77,"p",41),o(78,"Cor para elementos secund\xE1rios"),i()(),n(79,"div")(80,"label",37),o(81,"Paletas Sugeridas"),i(),n(82,"div",43),N(83,ie,1,3,"button",44,J),i()(),n(85,"div",45)(86,"button",46),g("click",function(){return p(a),u(e.resetColors())}),c(87,"i",47),o(88," Restaurar Cores Padr\xE3o "),i()()()()(),n(89,"div",48)(90,"div",7)(91,"h3",8),c(92,"i",49),o(93," Informa\xE7\xF5es da Empresa "),i()(),n(94,"div",11)(95,"div")(96,"label",37),o(97,"Nome da Empresa"),i(),n(98,"input",50),M("ngModelChange",function(m){return p(a),B(e.companyName,m)||(e.companyName=m),u(m)}),g("input",function(m){return p(a),u(e.companyName.set(m.target.value))}),i(),n(99,"p",41),o(100,"Este nome aparecer\xE1 no cabe\xE7alho do sistema"),i()()()(),b(101,re,11,0,"div",51),i()(),b(102,se,39,8,"div",52)}r&2&&(s(2),y("disabled",e.isSaving()),s(),_(e.isSaving()?3:4),s(3),_(e.successMessage()?6:-1),s(),_(e.errorMessage()?7:-1),s(10),x("background-color",e.primaryColor()),s(2),_(e.logoUrl()?19:20),s(2),x("color",e.getContrastColor(e.primaryColor())),s(),E(" ",e.companyName()||"Nome da Empresa"," "),s(2),x("background-color",e.secondaryColor())("color",e.getContrastColor(e.secondaryColor())),s(2),x("background-color",e.primaryColor()),s(3),x("color",e.primaryColor()),s(5),x("background-color",e.primaryColor()+"20")("color",e.primaryColor()),s(2),x("background-color",e.secondaryColor()+"20")("color",e.secondaryColor()),s(11),_(e.logoUrl()?47:48),s(8),S("ngModel",e.logoUrl),s(),_(e.logoUrl()?56:-1),s(11),y("value",e.primaryColor()),s(),y("value",e.primaryColor()),s(7),y("value",e.secondaryColor()),s(),y("value",e.secondaryColor()),s(7),D(e.colorPresets),s(15),S("ngModel",e.companyName),s(3),_(e.canDeleteCompany()?101:-1),s(),_(e.showDeleteConfirmation()?102:-1))},dependencies:[F,W,L,I,A,G,q],styles:["[_nghost-%COMP%]{display:block}"]})};export{H as BrandingConfigComponent};
