import{a as q}from"./chunk-74EB7MZB.js";import{a as H}from"./chunk-JFACAZYR.js";import"./chunk-ZHKWZS4J.js";import{A as $,C as A,J as B,m as L,p as I,t as R}from"./chunk-WR5PASHF.js";import"./chunk-2DDOTMQ2.js";import{F as z,G as j,I as G}from"./chunk-XMT6GSD7.js";import{Ab as x,Cb as k,Db as F,Eb as b,Fb as r,Gb as a,Hb as f,Ob as y,Qb as _,Sb as c,Ua as N,Xc as V,Ya as m,Zb as T,a as U,ac as P,b as E,bc as l,cc as O,dc as M,f as h,fa as S,gb as D,la as v,ma as C,wa as p,zb as g}from"./chunk-FTRINZK6.js";var Y=(o,t)=>t.email;function K(o,t){if(o&1){let e=y();r(0,"button",9),_("click",function(){v(e);let n=c();return C(n.showInviteFormToggle())}),f(1,"i",10),l(2," Convidar Usu\xE1rio "),a()}if(o&2){let e=c();T("background-color",e.getPrimaryColor()),b("disabled",e.inviteLoading())}}function Q(o,t){if(o&1&&(r(0,"div",15),f(1,"i",31),l(2),a()),o&2){let e=c(2);m(2),M(" ",e.inviteSuccess()," ")}}function W(o,t){if(o&1&&(r(0,"div",16),f(1,"i",32),l(2),a()),o&2){let e=c(2);m(2),M(" ",e.inviteError()," ")}}function X(o,t){o&1&&(f(0,"i",33),l(1," Enviando... "))}function Z(o,t){o&1&&(f(0,"i",34),l(1," Enviar Convite "))}function ee(o,t){if(o&1){let e=y();r(0,"div",5)(1,"div",11),f(2,"i",12),r(3,"strong",13),l(4,"Convidar Usu\xE1rio"),a()(),r(5,"p",14),l(6,"O usu\xE1rio receber\xE1 um email de convite para se juntar \xE0 empresa."),a(),g(7,Q,3,1,"div",15),g(8,W,3,1,"div",16),r(9,"form",17),_("submit",function(n){return v(e),c().inviteUser(),C(n.preventDefault())}),r(10,"div",18)(11,"div")(12,"label",19),l(13,"Nome do Usu\xE1rio *"),a(),r(14,"input",20),_("input",function(n){v(e);let s=c();return C(s.inviteName.set(n.target.value))}),a()(),r(15,"div")(16,"label",19),l(17,"Email do Usu\xE1rio *"),a(),r(18,"input",21),_("input",function(n){v(e);let s=c();return C(s.inviteEmail.set(n.target.value))}),a()()(),r(19,"div",22)(20,"div")(21,"label",19),l(22,"Fun\xE7\xE3o"),a(),r(23,"select",23),_("change",function(n){v(e);let s=c();return C(s.inviteRole.set(n.target.value))}),r(24,"option",24),l(25,"Usu\xE1rio"),a(),r(26,"option",25),l(27,"Gerente"),a(),r(28,"option",26),l(29,"Administrador"),a()()()(),r(30,"div",27)(31,"button",28),g(32,X,2,0)(33,Z,2,0),a(),r(34,"button",29),_("click",function(){v(e);let n=c();return C(n.showInviteForm.set(!1))}),f(35,"i",30),l(36," Cancelar "),a()()()()}if(o&2){let e=c();m(7),x(e.inviteSuccess()?7:-1),m(),x(e.inviteError()?8:-1),m(6),b("value",e.inviteName()),m(4),b("value",e.inviteEmail()),m(5),b("value",e.inviteRole()),m(8),T("background-color",e.getPrimaryColor()),b("disabled",e.inviteLoading()||!e.inviteEmail().trim()||!e.inviteName().trim()),m(),x(e.inviteLoading()?32:33)}}function te(o,t){o&1&&(r(0,"div",6),f(1,"i",35),r(2,"p",36),l(3,"Carregando usu\xE1rios..."),a()())}function ne(o,t){if(o&1){let e=y();r(0,"button",41),_("click",function(){v(e);let n=c(2);return C(n.showInviteFormToggle())}),f(1,"i",10),l(2," Convidar Primeiro Usu\xE1rio "),a()}if(o&2){let e=c(2);T("background-color",e.getPrimaryColor())}}function ie(o,t){if(o&1&&(r(0,"div",6),f(1,"i",37),r(2,"h5",38),l(3,"Nenhum usu\xE1rio encontrado"),a(),r(4,"p",39),l(5,"Convide usu\xE1rios para colaborar na sua empresa."),a(),g(6,ne,3,2,"button",40),a()),o&2){let e=c();m(6),x(e.canManageUsers()?6:-1)}}function oe(o,t){if(o&1&&(r(0,"div",51),l(1),a()),o&2){let e=c().$implicit;m(),M(" ",e.displayName.charAt(0).toUpperCase()," ")}}function re(o,t){o&1&&f(0,"i",52)}function ae(o,t){o&1&&(r(0,"span",55),l(1,"(Voc\xEA)"),a())}function se(o,t){o&1&&(r(0,"span",56),l(1,"(Propriet\xE1rio)"),a())}function le(o,t){if(o&1){let e=y();r(0,"select",63),_("change",function(n){v(e);let s=c().$implicit,u=c(2);return C(u.changeUserRole(s.email,n.target.value))}),r(1,"option",24),l(2,"Usu\xE1rio"),a(),r(3,"option",25),l(4,"Gerente"),a(),r(5,"option",26),l(6,"Administrador"),a()()}if(o&2){let e=c().$implicit,i=c(2);b("value",e.role)("disabled",i.isLoading())}}function ce(o,t){if(o&1&&(r(0,"span"),l(1),a()),o&2){let e=c().$implicit,i=c(2);P(i.getRoleBadgeClass(e.role)),m(),M(" ",i.getRoleLabel(e.role)," ")}}function me(o,t){if(o&1){let e=y();r(0,"button",68),_("click",function(){v(e);let n=c(2).$implicit,s=c(2);return C(s.resendInvite(n.email))}),f(1,"i",69),l(2," Reenviar "),a()}if(o&2){let e=c(4);b("disabled",e.isLoading())}}function de(o,t){if(o&1){let e=y();r(0,"button",70),_("click",function(){v(e);let n=c(2).$implicit,s=c(2);return C(s.inactivateUser(n.email))}),f(1,"i",71),l(2," Inativar "),a()}if(o&2){let e=c(4);b("disabled",e.isLoading())}}function ue(o,t){if(o&1){let e=y();r(0,"div",62),g(1,me,3,1,"button",64),g(2,de,3,1,"button",65),r(3,"button",66),_("click",function(){v(e);let n=c().$implicit,s=c(2);return C(s.removeUser(n.email))}),f(4,"i",67),l(5," Excluir "),a()()}if(o&2){let e=c().$implicit,i=c(2);m(),x(e.inviteStatus==="pending"?1:-1),m(),x(e.inviteStatus==="accepted"?2:-1),m(),b("disabled",i.isLoading())}}function pe(o,t){if(o&1&&(r(0,"tr",47)(1,"td",48)(2,"div",49)(3,"div",50),g(4,oe,2,1,"div",51)(5,re,1,0,"i",52),a(),r(6,"div",53)(7,"div",54),l(8),a(),g(9,ae,2,0,"span",55),g(10,se,2,0,"span",56),a()()(),r(11,"td",48)(12,"div",57),l(13),a()(),r(14,"td",48),g(15,le,7,2,"select",58)(16,ce,2,3,"span",59),a(),r(17,"td",48)(18,"span"),l(19),a()(),r(20,"td",60),l(21),a(),r(22,"td",61),g(23,ue,6,3,"div",62),a()()),o&2){let e,i,n,s,u=t.$implicit,d=c(2);m(4),x(u.displayName?4:5),m(4),M(" ",u.displayName||"Usu\xE1rio sem nome"," "),m(),x(u.email===((e=d.currentUser())==null?null:e.email)?9:-1),m(),x(u.email===((i=d.currentCompany())==null?null:i.ownerEmail)?10:-1),m(3),O(u.email),m(2),x(d.canManageUsers()&&u.email!==((n=d.currentCompany())==null?null:n.ownerEmail)?15:16),m(3),P(d.getStatusBadgeClass(u.inviteStatus||"accepted")),m(),M(" ",d.getStatusLabel(u.inviteStatus||"accepted")," "),m(2),M(" ",d.formatJoinedDate(u.joinedAt)," "),m(2),x(d.canManageUsers()&&u.email!==((s=d.currentUser())==null?null:s.email)&&u.email!==((s=d.currentCompany())==null?null:s.ownerEmail)?23:-1)}}function ge(o,t){if(o&1&&(r(0,"div",7)(1,"table",42)(2,"thead",43)(3,"tr")(4,"th",44),l(5,"Usu\xE1rio"),a(),r(6,"th",44),l(7,"Email"),a(),r(8,"th",44),l(9,"Fun\xE7\xE3o"),a(),r(10,"th",44),l(11,"Status"),a(),r(12,"th",44),l(13,"Membro desde"),a(),r(14,"th",45),l(15,"A\xE7\xF5es"),a()()(),r(16,"tbody",46),k(17,pe,24,11,"tr",47,Y),a()()()),o&2){let e=c();m(17),F(e.users())}}function xe(o,t){if(o&1){let e=y();r(0,"div",8)(1,"div",72)(2,"div",73)(3,"h3",74),l(4),a()(),r(5,"div",75),f(6,"p",76),a(),r(7,"div",77)(8,"button",78),_("click",function(){v(e);let n=c();return C(n.cancelModalAction())}),l(9," Cancelar "),a(),r(10,"button",79),_("click",function(){v(e);let n=c();return C(n.confirmModalAction())}),l(11),a()()()()}if(o&2){let e=c();m(4),O(e.confirmTitle()),m(2),b("innerHTML",e.confirmMessage(),N),m(4),P(e.confirmButtonClass()==="btn-danger"?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"),m(),M(" ",e.confirmButtonText()," ")}}var J=class o{companyService=S(G);authService=S(j);subdomainService=S(z);users=p([]);currentCompany=p(null);currentUser=p(null);isLoading=p(!1);showInviteForm=p(!1);inviteEmail=p("");inviteName=p("");inviteRole=p("user");inviteLoading=p(!1);inviteError=p(null);inviteSuccess=p(null);showConfirmModal=p(!1);confirmAction=p(null);confirmTitle=p("");confirmMessage=p("");confirmButtonText=p("Confirmar");confirmButtonClass=p("btn-danger");ngOnInit(){return h(this,null,function*(){yield this.ensureCompanyContext(),yield this.loadUserData(),yield this.forceAddCurrentUser(),yield this.loadCompanyUsers()})}forceAddCurrentUser(){return h(this,null,function*(){let t=this.authService.getCurrentUser(),e=this.currentCompany();if(console.log("Force adding current user - User:",t?.email,"Company:",e?.name,"ID:",e?.id),!t||!e||!t.email||!e.id){console.log("Missing data for force add user");return}try{let n=(yield this.companyService.getCompanyUsers(e.id)).some(s=>s.email===t.email);if(console.log("User already exists in company:",n),!n){let s=t.email===e.ownerEmail?"admin":"user";console.log("Adding user with role:",s),yield this.companyService.addUserToCompany(e.id,t.email,s),console.log("User added successfully")}}catch(i){console.error("Error in forceAddCurrentUser:",i)}})}syncCurrentUserToCompany(){return h(this,null,function*(){let t=this.authService.getCurrentUser(),e=this.currentCompany();if(!(!t||!e||!t.email))try{if(!this.users().find(n=>n.email===t.email)){let n=t.email===e.ownerEmail?"admin":"user";yield this.companyService.addUserToCompany(e.id,t.email,n),yield this.loadCompanyUsers()}}catch(i){console.error("Erro ao sincronizar usu\xE1rio atual:",i)}})}loadUserData(){return h(this,null,function*(){let t=this.subdomainService.getCurrentCompany(),e=this.authService.getCurrentUser();this.currentCompany.set(t),this.currentUser.set(e)})}ensureCompanyContext(){return h(this,null,function*(){let t=this.subdomainService.getCurrentCompany();if(!t)try{t=yield this.subdomainService.initializeFromSubdomain()}catch{}if(t)this.currentCompany.set(t);else{let e=this.authService.getCurrentUser();if(e?.email)try{let i=yield this.companyService.getCompanyByUserEmail(e.email);i&&(this.subdomainService.setCurrentCompany(i),this.currentCompany.set(i))}catch{}}})}loadCompanyUsers(){return h(this,null,function*(){let t=this.currentCompany();if(!((!t||!t.id)&&(yield this.ensureCompanyContext(),t=this.currentCompany(),!t||!t.id))){this.isLoading.set(!0);try{let e=yield this.companyService.getCompanyUsers(t.id);if(e.length===0){let n=this.authService.getCurrentUser();if(console.log("No users found, current user:",n),n&&n.email){let s=n.email===t.ownerEmail?"admin":"user",u={uid:n.uid,email:n.email,displayName:n.displayName||this.extractNameFromEmail(n.email),role:s,permissions:[],joinedAt:new Date,photoURL:n.photoURL,emailVerified:n.emailVerified,inviteStatus:"accepted"};e=[u],this.companyService.addUserToCompany(t.id,n.email,u.role).catch(()=>{})}}let i=e.map(n=>{try{let s=this.authService.getCurrentUser();return s&&s.email===n.email?E(U({},n),{displayName:s.displayName||n.displayName||this.extractNameFromEmail(n.email),photoURL:s.photoURL||n.photoURL,emailVerified:s.emailVerified||n.emailVerified,uid:s.uid||n.uid,inviteStatus:n.inviteStatus||"accepted",inviteToken:n.inviteToken}):E(U({},n),{displayName:n.displayName||this.extractNameFromEmail(n.email),inviteStatus:n.inviteStatus||"accepted",inviteToken:n.inviteToken})}catch(s){return console.warn("Erro ao enriquecer dados do usu\xE1rio:",n.email,s),E(U({},n),{displayName:n.displayName||this.extractNameFromEmail(n.email),inviteStatus:n.inviteStatus||"accepted",inviteToken:n.inviteToken})}});this.users.set(i)}catch(e){console.error("Erro ao carregar usu\xE1rios:",e)}finally{this.isLoading.set(!1)}}})}extractNameFromEmail(t){return t.split("@")[0].replace(/[._]/g," ").split(" ").map(i=>i.charAt(0).toUpperCase()+i.slice(1).toLowerCase()).join(" ")}inviteUser(){return h(this,null,function*(){let t=this.inviteEmail().trim(),e=this.inviteName().trim(),i=this.inviteRole(),n=this.currentCompany();if(!t||!n)return;if(!e){this.inviteError.set("Nome \xE9 obrigat\xF3rio");return}if(e.length<2){this.inviteError.set("Nome deve ter pelo menos 2 caracteres");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)){this.inviteError.set("Email inv\xE1lido");return}if(this.users().find(d=>d.email===t)){this.inviteError.set("Este usu\xE1rio j\xE1 faz parte da empresa");return}this.inviteLoading.set(!0),this.inviteError.set(null),this.inviteSuccess.set(null);try{yield this.companyService.addUserToCompany(n.id,t,i,e),this.inviteSuccess.set(`Convite enviado para ${e} (${t})`),this.inviteEmail.set(""),this.inviteName.set(""),this.inviteRole.set("user"),yield this.loadCompanyUsers(),setTimeout(()=>{this.showInviteForm.set(!1),this.inviteSuccess.set(null)},2e3)}catch(d){console.error("Erro ao convidar usu\xE1rio:",d);let w="Erro ao enviar convite. Tente novamente.";d?.message&&(d.message.includes("Configura\xE7\xE3o SMTP")?w=`\u274C ${d.message}. Configure o SMTP na se\xE7\xE3o de configura\xE7\xF5es antes de enviar convites.`:d.message.includes("email de convite")?w=d.message:w=`Erro: ${d.message}`),this.inviteError.set(w)}finally{this.inviteLoading.set(!1)}})}removeUser(t){console.log("\u{1F680} Debug - removeUser chamado para:",t);let e=this.currentCompany(),i=this.currentUser();if(console.log("\u{1F3E2} Debug - Company:",!!e),console.log("\u{1F464} Debug - Current user:",!!i),!e||!i){console.log("\u274C Debug - Company ou usu\xE1rio n\xE3o encontrado");return}if(t===i.email){this.showConfirmation("A\xE7\xE3o n\xE3o permitida",'Voc\xEA n\xE3o pode remover a si mesmo. Use a op\xE7\xE3o "Excluir Empresa" se deseja sair.',()=>{},"Entendi","btn-primary");return}let s=this.users().find(u=>u.email===t)?.displayName||t;this.showConfirmation("Confirmar exclus\xE3o",`Deseja realmente remover <strong>${s}</strong> (${t}) da empresa?<br><br>Esta a\xE7\xE3o n\xE3o pode ser desfeita.`,()=>this.confirmRemoveUser(t),"Excluir Usu\xE1rio","btn-danger")}confirmRemoveUser(t){return h(this,null,function*(){let e=this.currentCompany();if(!e){console.error("\u{1F6AB} Debug - Empresa n\xE3o encontrada");return}console.log("\u{1F5D1}\uFE0F Debug - Iniciando remo\xE7\xE3o do usu\xE1rio:",{userEmail:t,companyId:e.id}),this.isLoading.set(!0);try{console.log("\u{1F504} Debug - Chamando removeUserFromCompany..."),yield this.companyService.removeUserFromCompany(e.id,t),console.log("\u2705 Debug - Usu\xE1rio removido do Firestore"),console.log("\u{1F504} Debug - Recarregando lista de usu\xE1rios..."),yield this.loadCompanyUsers(),console.log("\u2705 Debug - Lista de usu\xE1rios recarregada"),this.inviteSuccess.set(`Usu\xE1rio ${t} removido com sucesso.`),setTimeout(()=>{this.inviteSuccess.set(null)},3e3)}catch(i){console.error("\u274C Debug - Erro ao remover usu\xE1rio:",i),this.showConfirmation("Erro ao remover usu\xE1rio","Ocorreu um erro ao tentar remover o usu\xE1rio. Tente novamente.",()=>{},"Fechar","btn-primary")}finally{this.isLoading.set(!1)}})}changeUserRole(t,e){return h(this,null,function*(){let i=this.currentCompany();if(i){this.isLoading.set(!0);try{yield this.companyService.updateUserRole(i.id,t,e),yield this.loadCompanyUsers()}catch(n){console.error("Erro ao alterar fun\xE7\xE3o do usu\xE1rio:",n),this.showConfirmation("Erro ao alterar fun\xE7\xE3o","Ocorreu um erro ao alterar a fun\xE7\xE3o do usu\xE1rio. Tente novamente.",()=>{},"Fechar","btn-primary")}finally{this.isLoading.set(!1)}}})}resendInvite(t){return h(this,null,function*(){let e=this.currentCompany();if(e){this.isLoading.set(!0);try{let i=this.users().find(n=>n.email===t);i&&(yield this.companyService.addUserToCompany(e.id,t,i.role,i.displayName),this.inviteSuccess.set(`Convite reenviado para ${t}`),setTimeout(()=>{this.inviteSuccess.set(null)},3e3),yield this.loadCompanyUsers())}catch(i){console.error("Erro ao reenviar convite:",i);let n="Erro ao reenviar convite. Tente novamente.";i?.message&&i.message.includes("Configura\xE7\xE3o SMTP")&&(n=`\u274C ${i.message}. Configure o SMTP na se\xE7\xE3o de configura\xE7\xF5es antes de reenviar convites.`),this.inviteError.set(n),setTimeout(()=>{this.inviteError.set(null)},5e3)}finally{this.isLoading.set(!1)}}})}inactivateUser(t){if(!this.currentCompany())return;let n=this.users().find(s=>s.email===t)?.displayName||t;this.showConfirmation("Confirmar inativa\xE7\xE3o",`Deseja realmente inativar <strong>${n}</strong> (${t})?<br><br>O usu\xE1rio n\xE3o poder\xE1 mais acessar o sistema at\xE9 ser reativado.`,()=>this.confirmInactivateUser(t),"Inativar Usu\xE1rio","btn-danger")}confirmInactivateUser(t){return h(this,null,function*(){let e=this.currentCompany();if(e){this.isLoading.set(!0);try{yield this.companyService.updateUserInCompany(e.id,t,{inviteStatus:"inactive"}),yield this.loadCompanyUsers(),this.inviteSuccess.set(`Usu\xE1rio ${t} foi inativado com sucesso.`),setTimeout(()=>{this.inviteSuccess.set(null)},3e3)}catch(i){console.error("Erro ao inativar usu\xE1rio:",i),this.showConfirmation("Erro ao inativar usu\xE1rio","Ocorreu um erro ao tentar inativar o usu\xE1rio. Tente novamente.",()=>{},"Fechar","btn-primary")}finally{this.isLoading.set(!1)}}})}canManageUsers(){let t=this.currentUser(),e=this.currentCompany();return!t||!e?!1:e.ownerEmail===t.email?!0:this.users().length>0?this.users().find(n=>n.email===t.email)?.role==="admin":!0}showInviteFormToggle(){this.showInviteForm.set(!this.showInviteForm()),this.inviteError.set(null),this.inviteSuccess.set(null),this.inviteEmail.set(""),this.inviteName.set("")}showConfirmation(t,e,i,n="Confirmar",s="btn-danger"){console.log("\u{1F4F1} Debug Modal - Mostrando confirma\xE7\xE3o:",{title:t,buttonText:n}),this.confirmTitle.set(t),this.confirmMessage.set(e),this.confirmAction.set(i),this.confirmButtonText.set(n),this.confirmButtonClass.set(s),this.showConfirmModal.set(!0),console.log("\u2705 Debug Modal - Modal configurado e aberto")}confirmModalAction(){console.log("\u{1F504} Debug Modal - Confirmando a\xE7\xE3o...");let t=this.confirmAction();console.log("\u{1F3AF} Debug Modal - A\xE7\xE3o encontrada:",!!t),t?(console.log("\u25B6\uFE0F Debug Modal - Executando a\xE7\xE3o..."),t()):console.log("\u274C Debug Modal - Nenhuma a\xE7\xE3o para executar"),this.showConfirmModal.set(!1),console.log("\u2705 Debug Modal - Modal fechado")}cancelModalAction(){this.showConfirmModal.set(!1),this.confirmAction.set(null)}getRoleLabel(t){switch(t){case"admin":return"Administrador";case"manager":return"Gerente";case"user":return"Usu\xE1rio";default:return t}}getRoleBadgeClass(t){switch(t){case"admin":return"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800";case"manager":return"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800";case"user":return"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800";default:return"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800"}}getStatusLabel(t){switch(t){case"pending":return"Convite Pendente";case"accepted":return"Ativo";case"expired":return"Convite Expirado";case"inactive":return"Inativo";default:return"Desconhecido"}}getStatusBadgeClass(t){switch(t){case"pending":return"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800";case"accepted":return"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800";case"expired":return"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800";case"inactive":return"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800";default:return"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800"}}getPrimaryColor(){let t=this.subdomainService.getCurrentCompany();return t?.primaryColor||t?.brandingConfig?.primaryColor||"#3B82F6"}formatJoinedDate(t){if(!t)return"Data n\xE3o dispon\xEDvel";try{return t&&typeof t.toDate=="function"?t.toDate().toLocaleDateString("pt-BR"):t instanceof Date?t.toLocaleDateString("pt-BR"):typeof t=="string"?new Date(t).toLocaleDateString("pt-BR"):"Data n\xE3o dispon\xEDvel"}catch(e){return console.warn("Erro ao formatar data:",t,e),"Data n\xE3o dispon\xEDvel"}}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=D({type:o,selectors:[["app-user-management"]],decls:11,vars:4,consts:[["title","Gerenciar Usu\xE1rios"],[1,"text-white","px-4","py-2","rounded-lg","text-sm","font-medium","transition-colors",3,"background-color","disabled"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8","py-8"],[1,"bg-white","rounded-lg","shadow-sm","border","border-gray-200"],[1,"p-6"],[1,"mb-6","p-4","bg-blue-50","border","border-blue-200","rounded-lg"],[1,"text-center","py-8"],[1,"overflow-x-auto"],[1,"fixed","inset-0","bg-gray-600","bg-opacity-50","overflow-y-auto","h-full","w-full","z-50","flex","items-center","justify-center"],[1,"text-white","px-4","py-2","rounded-lg","text-sm","font-medium","transition-colors",3,"click","disabled"],[1,"fas","fa-plus","mr-1"],[1,"flex","items-center","mb-3"],[1,"fas","fa-info-circle","text-blue-500","mr-2"],[1,"text-blue-800"],[1,"text-blue-700","text-sm","mb-4"],[1,"mb-4","p-3","bg-green-50","border","border-green-200","rounded","text-green-800"],[1,"mb-4","p-3","bg-red-50","border","border-red-200","rounded","text-red-800"],[1,"space-y-4",3,"submit"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","name","name","placeholder","Jo\xE3o Silva","required","",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:ring-blue-500","focus:border-blue-500",3,"input","value"],["type","email","name","email","placeholder","usuario@exemplo.com","required","",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:ring-blue-500","focus:border-blue-500",3,"input","value"],[1,"grid","grid-cols-1","md:grid-cols-1","gap-4"],["name","role",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:ring-blue-500","focus:border-blue-500",3,"change","value"],["value","user"],["value","manager"],["value","admin"],[1,"flex","space-x-3"],["type","submit",1,"text-white","px-4","py-2","rounded-md","text-sm","font-medium","transition-colors","disabled:opacity-50",3,"disabled"],["type","button",1,"bg-gray-500","hover:bg-gray-600","text-white","px-4","py-2","rounded-md","text-sm","font-medium","transition-colors",3,"click"],[1,"fas","fa-times","mr-1"],[1,"fas","fa-check-circle","mr-2"],[1,"fas","fa-exclamation-circle","mr-2"],[1,"fas","fa-spinner","fa-spin","mr-1"],[1,"fas","fa-paper-plane","mr-1"],[1,"fas","fa-spinner","fa-spin","text-2xl","text-gray-400","mb-4"],[1,"text-gray-600"],[1,"fas","fa-users","text-4xl","text-gray-300","mb-4"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"text-gray-600","mb-4"],[1,"text-white","px-4","py-2","rounded-md","text-sm","font-medium","transition-colors",3,"background-color"],[1,"text-white","px-4","py-2","rounded-md","text-sm","font-medium","transition-colors",3,"click"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"px-6","py-3","text-right","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],[1,"hover:bg-gray-50"],[1,"px-6","py-4","whitespace-nowrap"],[1,"flex","items-center"],[1,"flex-shrink-0","h-10","w-10"],[1,"h-10","w-10","rounded-full","bg-blue-500","flex","items-center","justify-center","text-white","font-medium"],[1,"fas","fa-user-circle","text-2xl","text-gray-400"],[1,"ml-4"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-xs","text-blue-600","font-medium"],[1,"text-xs","text-purple-600","font-medium"],[1,"text-sm","text-gray-900"],[1,"text-sm","border","border-gray-300","rounded","px-2","py-1","focus:ring-blue-500","focus:border-blue-500",3,"value","disabled"],[3,"class"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-500"],[1,"px-6","py-4","whitespace-nowrap","text-right","text-sm","font-medium"],[1,"flex","space-x-2","justify-end"],[1,"text-sm","border","border-gray-300","rounded","px-2","py-1","focus:ring-blue-500","focus:border-blue-500",3,"change","value","disabled"],["title","Reenviar convite",1,"text-blue-600","hover:text-blue-800","text-sm",3,"disabled"],["title","Inativar usu\xE1rio",1,"text-orange-600","hover:text-orange-800","text-sm",3,"disabled"],["title","Excluir usu\xE1rio",1,"text-red-600","hover:text-red-800","text-sm",3,"click","disabled"],[1,"fas","fa-trash","mr-1"],["title","Reenviar convite",1,"text-blue-600","hover:text-blue-800","text-sm",3,"click","disabled"],[1,"fas","fa-envelope","mr-1"],["title","Inativar usu\xE1rio",1,"text-orange-600","hover:text-orange-800","text-sm",3,"click","disabled"],[1,"fas","fa-user-slash","mr-1"],[1,"relative","bg-white","rounded-lg","shadow-xl","max-w-md","mx-auto"],[1,"px-6","py-4","border-b","border-gray-200"],[1,"text-lg","font-semibold","text-gray-900"],[1,"px-6","py-4"],[1,"text-gray-700",3,"innerHTML"],[1,"px-6","py-4","border-t","border-gray-200","flex","justify-end","space-x-3"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","bg-gray-200","hover:bg-gray-300","rounded-md","transition-colors",3,"click"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-white","rounded-md","transition-colors",3,"click"]],template:function(e,i){e&1&&(r(0,"app-main-layout")(1,"app-config-header",0),g(2,K,3,3,"button",1),a(),r(3,"div",2)(4,"div",3)(5,"div",4),g(6,ee,37,9,"div",5),g(7,te,4,0,"div",6)(8,ie,7,1,"div",6)(9,ge,19,0,"div",7),a()()(),g(10,xe,12,5,"div",8),a()),e&2&&(m(2),x(i.canManageUsers()?2:-1),m(4),x(i.showInviteForm()?6:-1),m(),x(i.isLoading()?7:i.users().length===0?8:9),m(3),x(i.showConfirmModal()?10:-1))},dependencies:[V,B,R,$,A,L,I,q,H],styles:[".user-management-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.invite-form[_ngcontent-%COMP%]{background-color:#f8f9fa;border:1px solid #dee2e6;border-radius:8px;padding:20px}.user-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background-color:#007bff;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;flex-shrink:0}.avatar-initials[_ngcontent-%COMP%]{font-size:16px;font-weight:700}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-top:none;font-weight:600;color:#495057}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.badge[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px;font-weight:500}.badge-danger[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.badge-warning[_ngcontent-%COMP%]{background-color:#ffc107;color:#212529}.badge-info[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.badge-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.danger-zone[_ngcontent-%COMP%]{border:1px solid #dc3545;border-radius:6px;padding:20px;background-color:#fff5f5}.danger-zone[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#dc3545!important}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;z-index:1040;width:100vw;height:100vh;background-color:#00000080}.modal[_ngcontent-%COMP%]{z-index:1050}.modal-dialog[_ngcontent-%COMP%]{max-width:500px;margin:1.75rem auto}.btn[_ngcontent-%COMP%]{border-radius:6px;font-weight:500;transition:all .2s ease}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 2px 4px #0000001a}.btn-sm[_ngcontent-%COMP%]{padding:4px 8px;font-size:12px}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}.alert[_ngcontent-%COMP%]{border-radius:8px;border:none;display:flex;align-items:center;gap:10px}.gap-2[_ngcontent-%COMP%]{gap:8px}.d-flex[_ngcontent-%COMP%]{display:flex}.align-items-center[_ngcontent-%COMP%]{align-items:center}.justify-content-between[_ngcontent-%COMP%]{justify-content:space-between}.ms-2[_ngcontent-%COMP%]{margin-left:8px}.mt-2[_ngcontent-%COMP%]{margin-top:8px}.mb-2[_ngcontent-%COMP%]{margin-bottom:8px}.mb-3[_ngcontent-%COMP%]{margin-bottom:16px}.mb-4[_ngcontent-%COMP%]{margin-bottom:24px}.py-4[_ngcontent-%COMP%]{padding-top:24px;padding-bottom:24px}.text-center[_ngcontent-%COMP%]{text-align:center}.text-muted[_ngcontent-%COMP%]{color:#6c757d!important}.text-primary[_ngcontent-%COMP%]{color:#007bff!important}.text-success[_ngcontent-%COMP%]{color:#28a745!important}.text-danger[_ngcontent-%COMP%]{color:#dc3545!important}.fw-bold[_ngcontent-%COMP%]{font-weight:700}.small[_ngcontent-%COMP%]{font-size:.875em}@media (max-width: 768px){.user-management-container[_ngcontent-%COMP%]{padding:10px}.invite-form[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{gap:10px}.invite-form[_ngcontent-%COMP%]   .col-md-2[_ngcontent-%COMP%], .invite-form[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%], .invite-form[_ngcontent-%COMP%]   .col-md-6[_ngcontent-%COMP%]{width:100%}.table-responsive[_ngcontent-%COMP%]{font-size:14px}.user-avatar[_ngcontent-%COMP%]{width:32px;height:32px;font-size:14px}}"]})};export{J as UserManagementComponent};
