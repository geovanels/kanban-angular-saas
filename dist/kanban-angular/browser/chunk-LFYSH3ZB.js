import{a as q}from"./chunk-5BR4X4OI.js";import{a as G}from"./chunk-A36OSPID.js";import{a as O}from"./chunk-LJSXBI7Y.js";import{H as W,h as U,k as I,r as A}from"./chunk-PU43IP5U.js";import{c as z}from"./chunk-HPS6D6FL.js";import{D as j,F as R}from"./chunk-WN35IHPO.js";import{$b as E,Ab as y,Bb as t,Cb as n,Db as c,Kb as v,Mb as g,Nc as L,Ob as C,Sa as T,Ua as d,Ub as F,Vb as x,Zb as o,_b as k,a as M,cb as P,cc as w,da as h,dc as S,ec as B,f as V,ja as p,ka as u,ta as f,vb as b,wb as _,yb as N,zb as D}from"./chunk-WVXLNUB3.js";var J=(a,i)=>i.name;function Z(a,i){a&1&&(c(0,"i",53),o(1," Salvando... "))}function K(a,i){a&1&&(c(0,"i",54),o(1," Salvar Configura\xE7\xF5es "))}function Q(a,i){if(a&1&&(t(0,"div",4),c(1,"i",55),o(2),n()),a&2){let r=C();d(2),E(" ",r.successMessage()," ")}}function X(a,i){if(a&1&&(t(0,"div",5),c(1,"i",56),o(2),n()),a&2){let r=C();d(2),E(" ",r.errorMessage()," ")}}function Y(a,i){if(a&1&&c(0,"img",15),a&2){let r=C();y("src",r.logoUrl(),T)}}function $(a,i){a&1&&(t(0,"div",16),c(1,"i",57),n())}function ee(a,i){if(a&1&&(c(0,"img",58),t(1,"p",59),o(2,"Clique para alterar o logo"),n()),a&2){let r=C();y("src",r.logoUrl(),T)}}function te(a,i){a&1&&(c(0,"i",60),t(1,"p",59),o(2,"Clique para fazer upload do logo"),n(),t(3,"p",41),o(4,"PNG, JPG ou SVG - M\xE1x. 5MB"),n())}function ne(a,i){if(a&1){let r=v();t(0,"button",61),g("click",function(){p(r);let l=C();return u(l.removeLogo())}),c(1,"i",62),o(2," Remover Logo "),n()}}function ie(a,i){if(a&1){let r=v();t(0,"button",63),g("click",function(){let l=p(r).$implicit,s=C();return u(s.applyColorPreset(l))}),n()}if(a&2){let r=i.$implicit;x("background-color",r.primary),y("title",r.name)}}function re(a,i){if(a&1){let r=v();t(0,"div",51)(1,"div",64)(2,"h3",65),c(3,"i",66),o(4," Zona Perigosa "),n(),t(5,"p",67),o(6," A exclus\xE3o da empresa \xE9 permanente e n\xE3o pode ser desfeita. Todos os dados, quadros, leads e usu\xE1rios ser\xE3o perdidos. "),n()(),t(7,"div",11)(8,"button",68),g("click",function(){p(r);let l=C();return u(l.showDeleteModal())}),c(9,"i",62),o(10," Excluir Empresa Permanentemente "),n()()()}}function oe(a,i){if(a&1&&(t(0,"div",79),c(1,"i",56),o(2),n()),a&2){let r=C(2);d(2),E(" ",r.deleteError()," ")}}function ae(a,i){a&1&&(c(0,"i",53),o(1," Excluindo... "))}function le(a,i){a&1&&(c(0,"i",62),o(1," Excluir Permanentemente "))}function de(a,i){if(a&1){let r=v();t(0,"div",52)(1,"div",69)(2,"div",70)(3,"div",71)(4,"h3",8),c(5,"i",72),o(6," Confirmar Exclus\xE3o "),n(),t(7,"button",73),g("click",function(){p(r);let l=C();return u(l.hideDeleteModal())}),c(8,"i",74),n()(),t(9,"div",75)(10,"strong"),o(11,"ATEN\xC7\xC3O:"),n(),o(12," Esta a\xE7\xE3o n\xE3o pode ser desfeita! "),n(),t(13,"p",76),o(14,"Voc\xEA est\xE1 prestes a excluir permanentemente:"),n(),t(15,"ul",77)(16,"li"),o(17,"Empresa: "),t(18,"strong"),o(19),n()(),t(20,"li"),o(21,"Todos os quadros e leads"),n(),t(22,"li"),o(23,"Todos os usu\xE1rios associados"),n(),t(24,"li"),o(25,"Todas as configura\xE7\xF5es e dados"),n()(),t(26,"p",76),o(27," Para confirmar, digite "),t(28,"strong"),o(29),n(),o(30," abaixo: "),n(),t(31,"input",78),B("ngModelChange",function(l){p(r);let s=C();return S(s.deleteConfirmation,l)||(s.deleteConfirmation=l),u(l)}),g("input",function(l){p(r);let s=C();return u(s.deleteConfirmation.set(l.target.value))}),n(),b(32,oe,3,1,"div",79),t(33,"div",38)(34,"button",80),g("click",function(){p(r);let l=C();return u(l.hideDeleteModal())}),o(35," Cancelar "),n(),t(36,"button",81),g("click",function(){p(r);let l=C();return u(l.deleteCompany())}),b(37,ae,2,0)(38,le,2,0),n()()()()()}if(a&2){let r,e,l,s=C();d(19),k((r=s.currentCompany())==null?null:r.name),d(10),k((e=s.currentCompany())==null?null:e.name),d(2),w("ngModel",s.deleteConfirmation),y("value",s.deleteConfirmation()),d(),_(s.deleteError()?32:-1),d(2),y("disabled",s.deleteLoading()),d(2),y("disabled",s.deleteLoading()||s.deleteConfirmation()!==((l=s.currentCompany())==null?null:l.name)),d(),_(s.deleteLoading()?37:38)}}var H=class a{companyService=h(R);subdomainService=h(z);brandingService=h(q);authService=h(j);currentCompany=f(null);primaryColor=f("#3B82F6");secondaryColor=f("#6B7280");logoUrl=f("");companyName=f("");isSaving=f(!1);successMessage=f(null);errorMessage=f(null);showDeleteConfirmation=f(!1);deleteConfirmation=f("");deleteLoading=f(!1);deleteError=f(null);colorPresets=[{name:"Azul",primary:"#3B82F6",secondary:"#6B7280"},{name:"Verde",primary:"#10B981",secondary:"#6B7280"},{name:"Vermelho",primary:"#EF4444",secondary:"#6B7280"},{name:"Roxo",primary:"#8B5CF6",secondary:"#6B7280"},{name:"Laranja",primary:"#F59E0B",secondary:"#6B7280"},{name:"Rosa",primary:"#EC4899",secondary:"#6B7280"}];ngOnInit(){this.loadCurrentBranding()}loadCurrentBranding(){let i=this.subdomainService.getCurrentCompany();i&&(this.currentCompany.set(i),this.primaryColor.set(i.brandingConfig?.primaryColor||"#3B82F6"),this.secondaryColor.set(i.brandingConfig?.secondaryColor||"#6B7280"),this.logoUrl.set(i.brandingConfig?.logo||""),this.companyName.set(i.name||""))}saveConfiguration(){return V(this,null,function*(){let i=this.currentCompany();if(!i){this.showError("Empresa n\xE3o encontrada");return}this.isSaving.set(!0),this.clearMessages();try{let r={name:this.companyName(),brandingConfig:{primaryColor:this.primaryColor(),secondaryColor:this.secondaryColor(),logo:this.logoUrl(),favicon:i.brandingConfig?.favicon||"",customCSS:i.brandingConfig?.customCSS||"",companyName:this.companyName()}};yield this.companyService.updateCompany(i.id,r);let e=M(M({},i),r);this.subdomainService.setCurrentCompany(e),this.currentCompany.set(e),yield this.brandingService.updateColors({primaryColor:this.primaryColor(),secondaryColor:this.secondaryColor()}),this.showSuccess("Configura\xE7\xF5es de branding salvas com sucesso!")}catch(r){console.error("Erro ao salvar configura\xE7\xF5es de branding:",r),this.showError("Erro ao salvar configura\xE7\xF5es. Tente novamente.")}finally{this.isSaving.set(!1)}})}onLogoSelected(i){let r=i.target.files[0];if(r){let e=new FileReader;e.onload=l=>{this.logoUrl.set(l.target?.result)},e.readAsDataURL(r)}}removeLogo(){confirm("Tem certeza que deseja remover o logo?")&&this.logoUrl.set("")}applyColorPreset(i){this.primaryColor.set(i.primary),this.secondaryColor.set(i.secondary),this.applyPreviewColors()}resetColors(){this.primaryColor.set("#3B82F6"),this.secondaryColor.set("#6B7280")}getContrastColor(i){if(!i)return"#000000";let r=i.replace("#",""),e=parseInt(r.substr(0,2),16),l=parseInt(r.substr(2,2),16),s=parseInt(r.substr(4,2),16);return(.299*e+.587*l+.114*s)/255>.5?"#000000":"#FFFFFF"}applyBrandingToPage(){document.documentElement.style.setProperty("--primary-color",this.primaryColor()),document.documentElement.style.setProperty("--secondary-color",this.secondaryColor())}canDeleteCompany(){let i=this.authService.getCurrentUser(),r=this.currentCompany();return!i||!r?!1:r.ownerEmail===i.email}deleteCompany(){return V(this,null,function*(){let i=this.currentCompany(),r=this.deleteConfirmation().trim();if(!i||r!==i.name){this.deleteError.set("Digite exatamente o nome da empresa para confirmar");return}this.deleteLoading.set(!0),this.deleteError.set(null);try{yield this.companyService.deleteCompany(i.id),yield this.authService.logout(),window.location.href="/login"}catch(e){console.error("Erro ao excluir empresa:",e),this.deleteError.set("Erro ao excluir empresa. Tente novamente.")}finally{this.deleteLoading.set(!1)}})}showDeleteModal(){this.showDeleteConfirmation.set(!0),this.deleteConfirmation.set(""),this.deleteError.set(null)}hideDeleteModal(){this.showDeleteConfirmation.set(!1),this.deleteConfirmation.set(""),this.deleteError.set(null)}applyPreviewColors(){this.brandingService.updateColors({primaryColor:this.primaryColor(),secondaryColor:this.secondaryColor()}).catch(i=>{this.applyBrandingToPage()})}showSuccess(i){this.successMessage.set(i),this.errorMessage.set(null),setTimeout(()=>this.successMessage.set(null),5e3)}showError(i){this.errorMessage.set(i),this.successMessage.set(null),setTimeout(()=>this.errorMessage.set(null),5e3)}clearMessages(){this.successMessage.set(null),this.errorMessage.set(null)}static \u0275fac=function(r){return new(r||a)};static \u0275cmp=P({type:a,selectors:[["app-branding-config"]],decls:103,vars:36,consts:[["logoInput",""],["title","Minha Empresa"],[1,"bg-green-500","hover:bg-green-600","text-white","px-4","py-2","rounded-lg","text-sm","font-medium","transition-colors",3,"click","disabled"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8","py-8"],[1,"mb-6","p-4","bg-green-50","border","border-green-200","rounded-lg","text-green-800"],[1,"mb-6","p-4","bg-red-50","border","border-red-200","rounded-lg","text-red-800"],[1,"bg-white","rounded-lg","shadow-sm","border","border-gray-200","mb-8"],[1,"p-6","border-b","border-gray-200"],[1,"text-lg","font-semibold","text-gray-900","flex","items-center"],[1,"fas","fa-eye","text-blue-500","mr-2"],[1,"text-sm","text-gray-600","mt-1"],[1,"p-6"],[1,"border","border-gray-300","rounded-lg","p-6","bg-gray-50"],[1,"flex","items-center","justify-between","p-4","bg-white","rounded","border","border-gray-200","mb-4"],[1,"flex","items-center","space-x-3"],["alt","Logo Preview",1,"h-8","w-auto",3,"src"],[1,"h-8","w-8","bg-gray-300","rounded","flex","items-center","justify-center"],[1,"text-lg","font-semibold"],[1,"flex","space-x-2"],[1,"px-3","py-1","rounded","text-sm","font-medium"],[1,"px-3","py-1","rounded","text-sm","font-medium","text-white"],[1,"bg-white","rounded","border","border-gray-200","p-4"],[1,"font-semibold","mb-2"],[1,"text-gray-600","text-sm","mb-3"],[1,"px-2","py-1","rounded","text-xs","font-medium"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-8"],[1,"bg-white","rounded-lg","shadow-sm","border","border-gray-200"],[1,"fas","fa-image","text-blue-500","mr-2"],[1,"mb-6"],[1,"border-2","border-dashed","border-gray-300","rounded-lg","p-8","text-center","hover:border-blue-400","transition-colors","cursor-pointer",3,"click"],["type","file","accept","image/*",1,"hidden",3,"change"],[1,"space-y-3"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","url","placeholder","https://exemplo.com/logo.png",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","input","ngModel"],[1,"w-full","bg-red-500","hover:bg-red-600","text-white","px-4","py-2","rounded-md","text-sm","font-medium","transition-colors"],[1,"fas","fa-palette","text-blue-500","mr-2"],[1,"p-6","space-y-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"flex","space-x-3"],["type","color",1,"w-12","h-10","border","border-gray-300","rounded","cursor-pointer",3,"input","value"],["type","text","placeholder","#3B82F6",1,"flex-1","px-3","py-2","border","border-gray-300","rounded-md","focus:ring-blue-500","focus:border-blue-500",3,"input","value"],[1,"text-xs","text-gray-500","mt-1"],["type","text","placeholder","#6B7280",1,"flex-1","px-3","py-2","border","border-gray-300","rounded-md","focus:ring-blue-500","focus:border-blue-500",3,"input","value"],[1,"flex","space-x-2","flex-wrap","gap-2"],["type","button",1,"w-8","h-8","rounded-full","border-2","border-white","shadow-sm","hover:scale-110","transition-transform",3,"background-color","title"],[1,"pt-4","border-t","border-gray-200"],["type","button",1,"w-full","bg-gray-500","hover:bg-gray-600","text-white","px-4","py-2","rounded-md","text-sm","font-medium","transition-colors",3,"click"],[1,"fas","fa-undo","mr-1"],[1,"mt-8","bg-white","rounded-lg","shadow-sm","border","border-gray-200"],[1,"fas","fa-building","text-blue-500","mr-2"],["type","text","placeholder","Nome da sua empresa",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","input","ngModel"],[1,"mt-8","bg-white","rounded-lg","shadow-sm","border","border-red-200"],[1,"fixed","inset-0","bg-gray-600","bg-opacity-50","overflow-y-auto","h-full","w-full","z-50"],[1,"fas","fa-spinner","fa-spin","mr-1"],[1,"fas","fa-save","mr-1"],[1,"fas","fa-check-circle","mr-2"],[1,"fas","fa-exclamation-circle","mr-2"],[1,"fas","fa-image","text-gray-500"],["alt","Logo atual",1,"max-h-20","mx-auto","mb-4",3,"src"],[1,"text-sm","text-gray-600"],[1,"fas","fa-cloud-upload-alt","text-4xl","text-gray-400","mb-4"],[1,"w-full","bg-red-500","hover:bg-red-600","text-white","px-4","py-2","rounded-md","text-sm","font-medium","transition-colors",3,"click"],[1,"fas","fa-trash","mr-1"],["type","button",1,"w-8","h-8","rounded-full","border-2","border-white","shadow-sm","hover:scale-110","transition-transform",3,"click","title"],[1,"p-6","bg-red-50","rounded-t-lg","border-b","border-red-200"],[1,"text-lg","font-semibold","text-red-800","flex","items-center"],[1,"fas","fa-exclamation-triangle","mr-2"],[1,"text-sm","text-red-700","mt-1"],[1,"bg-red-600","hover:bg-red-700","text-white","px-4","py-2","rounded-md","text-sm","font-medium","transition-colors",3,"click"],[1,"relative","top-20","mx-auto","p-5","border","w-96","shadow-lg","rounded-md","bg-white"],[1,"mt-3"],[1,"flex","items-center","justify-between","mb-4"],[1,"fas","fa-exclamation-triangle","text-red-500","mr-2"],[1,"text-gray-400","hover:text-gray-600",3,"click"],[1,"fas","fa-times"],[1,"mb-4","p-3","bg-red-50","border","border-red-200","rounded"],[1,"text-sm","text-gray-600","mb-4"],[1,"text-sm","text-gray-600","mb-4","list-disc","list-inside"],["type","text","placeholder","Nome da empresa",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:ring-red-500","focus:border-red-500","mb-4",3,"ngModelChange","input","ngModel","value"],[1,"mb-4","p-3","bg-red-50","border","border-red-200","rounded","text-red-800"],[1,"flex-1","bg-gray-500","hover:bg-gray-600","text-white","px-4","py-2","rounded-md","text-sm","font-medium","transition-colors",3,"click","disabled"],[1,"flex-1","bg-red-600","hover:bg-red-700","text-white","px-4","py-2","rounded-md","text-sm","font-medium","transition-colors",3,"click","disabled"]],template:function(r,e){if(r&1){let l=v();t(0,"app-main-layout")(1,"app-config-header",1)(2,"button",2),g("click",function(){return p(l),u(e.saveConfiguration())}),b(3,Z,2,0)(4,K,2,0),n()(),t(5,"div",3),b(6,Q,3,1,"div",4),b(7,X,3,1,"div",5),t(8,"div",6)(9,"div",7)(10,"h3",8),c(11,"i",9),o(12," Preview da Identidade Visual "),n(),t(13,"p",10),o(14,"Veja como ficar\xE1 a apar\xEAncia do sistema"),n()(),t(15,"div",11)(16,"div",12)(17,"div",13)(18,"div",14),b(19,Y,1,1,"img",15)(20,$,2,0,"div",16),t(21,"h2",17),o(22),n()(),t(23,"div",18)(24,"button",19),o(25," Bot\xE3o Secund\xE1rio "),n(),t(26,"button",20),o(27," Bot\xE3o Principal "),n()()(),t(28,"div",21)(29,"h3",22),o(30,"Sample Content"),n(),t(31,"p",23),o(32,"Este \xE9 um exemplo de como o conte\xFAdo aparecer\xE1 com suas cores personalizadas."),n(),t(33,"div",18)(34,"span",24),o(35," Tag Principal "),n(),t(36,"span",24),o(37," Tag Secund\xE1ria "),n()()()()()(),t(38,"div",25)(39,"div",26)(40,"div",7)(41,"h3",8),c(42,"i",27),o(43," Logo da Empresa "),n()(),t(44,"div",11)(45,"div",28)(46,"div",29),g("click",function(){p(l);let m=F(50);return u(m.click())}),b(47,ee,3,1)(48,te,5,0),n(),t(49,"input",30,0),g("change",function(m){return p(l),u(e.onLogoSelected(m))}),n()(),t(51,"div",31)(52,"div")(53,"label",32),o(54,"URL do Logo (opcional)"),n(),t(55,"input",33),B("ngModelChange",function(m){return p(l),S(e.logoUrl,m)||(e.logoUrl=m),u(m)}),g("input",function(m){return p(l),u(e.logoUrl.set(m.target.value))}),n()(),b(56,ne,3,0,"button",34),n()()(),t(57,"div",26)(58,"div",7)(59,"h3",8),c(60,"i",35),o(61," Cores da Empresa "),n()(),t(62,"div",36)(63,"div")(64,"label",37),o(65,"Cor Principal"),n(),t(66,"div",38)(67,"input",39),g("input",function(m){return p(l),e.primaryColor.set(m.target.value),u(e.applyPreviewColors())}),n(),t(68,"input",40),g("input",function(m){return p(l),e.primaryColor.set(m.target.value),u(e.applyPreviewColors())}),n()(),t(69,"p",41),o(70,"Cor principal da interface (bot\xF5es, links, etc.)"),n()(),t(71,"div")(72,"label",37),o(73,"Cor Secund\xE1ria"),n(),t(74,"div",38)(75,"input",39),g("input",function(m){return p(l),e.secondaryColor.set(m.target.value),u(e.applyPreviewColors())}),n(),t(76,"input",42),g("input",function(m){return p(l),e.secondaryColor.set(m.target.value),u(e.applyPreviewColors())}),n()(),t(77,"p",41),o(78,"Cor para elementos secund\xE1rios"),n()(),t(79,"div")(80,"label",37),o(81,"Paletas Sugeridas"),n(),t(82,"div",43),N(83,ie,1,3,"button",44,J),n()(),t(85,"div",45)(86,"button",46),g("click",function(){return p(l),u(e.resetColors())}),c(87,"i",47),o(88," Restaurar Cores Padr\xE3o "),n()()()()(),t(89,"div",48)(90,"div",7)(91,"h3",8),c(92,"i",49),o(93," Informa\xE7\xF5es da Empresa "),n()(),t(94,"div",11)(95,"div")(96,"label",37),o(97,"Nome da Empresa"),n(),t(98,"input",50),B("ngModelChange",function(m){return p(l),S(e.companyName,m)||(e.companyName=m),u(m)}),g("input",function(m){return p(l),u(e.companyName.set(m.target.value))}),n(),t(99,"p",41),o(100,"Este nome aparecer\xE1 no cabe\xE7alho do sistema"),n()()()(),b(101,re,11,0,"div",51),n()(),b(102,de,39,8,"div",52)}r&2&&(d(2),y("disabled",e.isSaving()),d(),_(e.isSaving()?3:4),d(3),_(e.successMessage()?6:-1),d(),_(e.errorMessage()?7:-1),d(10),x("background-color",e.primaryColor()),d(2),_(e.logoUrl()?19:20),d(2),x("color",e.getContrastColor(e.primaryColor())),d(),E(" ",e.companyName()||"Nome da Empresa"," "),d(2),x("background-color",e.secondaryColor())("color",e.getContrastColor(e.secondaryColor())),d(2),x("background-color",e.primaryColor()),d(3),x("color",e.primaryColor()),d(5),x("background-color",e.primaryColor()+"20")("color",e.primaryColor()),d(2),x("background-color",e.secondaryColor()+"20")("color",e.secondaryColor()),d(11),_(e.logoUrl()?47:48),d(8),w("ngModel",e.logoUrl),d(),_(e.logoUrl()?56:-1),d(11),y("value",e.primaryColor()),d(),y("value",e.primaryColor()),d(7),y("value",e.secondaryColor()),d(),y("value",e.secondaryColor()),d(7),D(e.colorPresets),d(15),w("ngModel",e.companyName),d(3),_(e.canDeleteCompany()?101:-1),d(),_(e.showDeleteConfirmation()?102:-1))},dependencies:[L,W,U,I,A,G,O],styles:["[_nghost-%COMP%]{display:block}"]})};export{H as BrandingConfigComponent};
