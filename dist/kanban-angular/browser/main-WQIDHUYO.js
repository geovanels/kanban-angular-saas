import{b as N,e as O,h as k,i as D}from"./chunk-NKMKES32.js";import{a as K}from"./chunk-FUZ5PWBD.js";import{a as B}from"./chunk-VRCZJENY.js";import{a as l}from"./chunk-IU7U2KCH.js";import{L as T,a as I,c as F,f as x,g as c,h as w}from"./chunk-N33KF77X.js";import{$ as z,B as E,E as P,L as j,T as M,v as R,w as H}from"./chunk-WLUU74ML.js";import{Bb as S,_ as s,bb as y,da as i,f as m,fa as v,i as h,jc as A,sa as b,ta as C,z as g}from"./chunk-3D7XR5P5.js";var u={production:!1,firebase:{apiKey:"AIzaSyB8wAgN-sgQaBybaaVAw9sXUDs5Z6r7Wcw",authDomain:"kanban-gobuyer.firebaseapp.com",projectId:"kanban-gobuyer",storageBucket:"kanban-gobuyer.appspot.com",messagingSenderId:"269726968959",appId:"1:269726968959:web:6aaf53ba4f7bf6b64d39c9"}};var d=class e{companyService=i(z);intercept(t,o){let n=this.companyService.getCompanySubdomain();if(n&&t.url.includes("/api/")){let r=t.clone({setHeaders:{"X-Company-Subdomain":n}});return o.handle(r)}return o.handle(t)}static \u0275fac=function(o){return new(o||e)};static \u0275prov=s({token:e,factory:e.\u0275fac})};var p=(e,t)=>{let o=i(B),n=i(c);return o.isAuthenticated().pipe(g(r=>r?!0:(n.navigate(["/login"]),!1)))};var a=class e{subdomainService=i(l);router=i(c);canActivate(){return new h(t=>{this.subdomainService.isInitialized$.subscribe(o=>{if(o)if(this.subdomainService.getCurrentCompany())t.next(!0),t.complete();else{let r=this.router.url;r==="/login"||r==="/"?(t.next(!0),t.complete()):(this.handleNoCompany(),t.next(!1),t.complete())}else this.subdomainService.initializeFromSubdomain().then(n=>m(this,null,function*(){if(n)t.next(!0);else{let r=this.router.url;if(r==="/login"||r==="/"||r.startsWith("/login?")){let W=new URLSearchParams(window.location.search).get("subdomain");t.next(!0)}else this.handleNoCompany(),t.next(!1)}t.complete()})).catch(n=>{console.error("Erro ao inicializar guard da empresa:",n);let r=this.router.url;r==="/login"||r==="/"||r.startsWith("/login?")?t.next(!0):(this.handleError(n),t.next(!1)),t.complete()})})})}handleNoCompany(){}handleError(t){}static \u0275fac=function(o){return new(o||e)};static \u0275prov=s({token:e,factory:e.\u0275fac,providedIn:"root"})};var L=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",loadComponent:()=>import("./chunk-VM6WQEGX.js").then(e=>e.LoginComponent),canActivate:[a]},{path:"dashboard",loadComponent:()=>import("./chunk-5Y2ZXZCK.js").then(e=>e.DashboardComponent),canActivate:[a,p]},{path:"kanban/:boardId",loadComponent:()=>import("./chunk-GK2BSD52.js").then(e=>e.KanbanComponent),canActivate:[a,p]},{path:"usuarios",loadComponent:()=>import("./chunk-7OADJJFO.js").then(e=>e.UserManagementComponent),canActivate:[a,p]},{path:"empresa/branding",loadComponent:()=>import("./chunk-UWN3GX4F.js").then(e=>e.BrandingConfigComponent),canActivate:[a,p]},{path:"empresa/smtp",loadComponent:()=>import("./chunk-7SGICBOD.js").then(e=>e.SmtpConfigComponent),canActivate:[a,p]},{path:"empresa/integracoes",loadComponent:()=>import("./chunk-DHWDAMZ7.js").then(e=>e.ApiLinksConfigComponent),canActivate:[a,p]},{path:"form",loadComponent:()=>import("./chunk-7TGY4MUA.js").then(e=>e.PublicFormComponent),canActivate:[a]},{path:"empresa-nao-encontrada",loadComponent:()=>import("./chunk-ZR7HGYGI.js").then(e=>e.CompanyNotFoundComponent)},{path:"**",redirectTo:"/login"}];var G={providers:[b(),A({eventCoalescing:!0}),w(L),F(),R(()=>H(u.firebase)),E(()=>P()),j(()=>M()),N(()=>O()),{provide:"HTTP_INTERCEPTORS",useClass:d,multi:!0},v(T,k.forRoot({validationMessages:[{name:"required",message:"Este campo \xE9 obrigat\xF3rio"}]}),D)]};var f=class e{subdomainService=i(l);firestoreService=i(K);title=C("Sistema Kanban");ngOnInit(){return m(this,null,function*(){try{let t=yield this.subdomainService.initializeFromSubdomain();t?(this.firestoreService.setCompanyContext(t),this.title.set(`${t.name} - Sistema Kanban`),this.updatePageTitle(t.name)):this.title.set("Sistema Kanban - Login")}catch(t){console.error("\u274C Erro ao inicializar aplica\xE7\xE3o:",t)}})}updatePageTitle(t){typeof document<"u"&&(document.title=`${t} - Sistema Kanban`)}static \u0275fac=function(o){return new(o||e)};static \u0275cmp=y({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(o,n){o&1&&S(0,"router-outlet")},dependencies:[x],encapsulation:2})};u.production&&(console.log=()=>{},console.info=()=>{},console.warn=()=>{});I(f,G).catch(e=>console.error(e));
