import{b as M,e as O,h as z,i as D}from"./chunk-5WZ3SHLW.js";import{a as U}from"./chunk-6ZWZNKWQ.js";import{a as h}from"./chunk-QUQFAB2X.js";import{L as k,M as p,a as w,c as x,f as R,g as l,h as H}from"./chunk-XFXMLSII.js";import{A as B,D as N,K as j,R as K,S as L,v as P,w as E,z as T}from"./chunk-4U6ZKXZY.js";import{Cb as I,_ as c,bb as S,da as i,f as s,fa as b,i as g,nc as F,ob as A,sa as C,ta as y,z as v}from"./chunk-O3JLSHCU.js";var u={production:!1,firebase:{apiKey:"AIzaSyB8wAgN-sgQaBybaaVAw9sXUDs5Z6r7Wcw",authDomain:"kanban-gobuyer.firebaseapp.com",projectId:"kanban-gobuyer",storageBucket:"kanban-gobuyer.appspot.com",messagingSenderId:"269726968959",appId:"1:269726968959:web:6aaf53ba4f7bf6b64d39c9"}};var d=class e{companyService=i(K);intercept(t,o){let n=this.companyService.getCompanySubdomain();if(n&&t.url.includes("/api/")){let r=t.clone({setHeaders:{"X-Company-Subdomain":n}});return o.handle(r)}return o.handle(t)}static \u0275fac=function(o){return new(o||e)};static \u0275prov=c({token:e,factory:e.\u0275fac})};var m=(e,t)=>{let o=i(L),n=i(l);return o.isAuthenticated().pipe(v(r=>r?!0:(n.navigate(["/login"]),!1)))};var a=class e{subdomainService=i(p);router=i(l);canActivate(){return new g(t=>{this.subdomainService.isInitialized$.subscribe(o=>{if(o)if(this.subdomainService.getCurrentCompany())t.next(!0),t.complete();else{let r=this.router.url;r==="/login"||r==="/"?(t.next(!0),t.complete()):(this.handleNoCompany(),t.next(!1),t.complete())}else this.subdomainService.initializeFromSubdomain().then(n=>s(this,null,function*(){if(n)t.next(!0);else{let r=this.router.url;if(r==="/login"||r==="/"||r.startsWith("/login?")){let $=new URLSearchParams(window.location.search).get("subdomain");t.next(!0)}else this.handleNoCompany(),t.next(!1)}t.complete()})).catch(n=>{console.error("Erro ao inicializar guard da empresa:",n);let r=this.router.url;r==="/login"||r==="/"||r.startsWith("/login?")?t.next(!0):(this.handleError(n),t.next(!1)),t.complete()})})})}handleNoCompany(){}handleError(t){}static \u0275fac=function(o){return new(o||e)};static \u0275prov=c({token:e,factory:e.\u0275fac,providedIn:"root"})};var W=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",loadComponent:()=>import("./chunk-BI62AYD5.js").then(e=>e.LoginComponent),canActivate:[a]},{path:"dashboard",loadComponent:()=>import("./chunk-T4PTCJJS.js").then(e=>e.DashboardComponent),canActivate:[a,m]},{path:"kanban/:boardId",loadComponent:()=>import("./chunk-RDPOG453.js").then(e=>e.KanbanComponent),canActivate:[a,m]},{path:"usuarios",loadComponent:()=>import("./chunk-LGDLUBN7.js").then(e=>e.UserManagementComponent),canActivate:[a,m]},{path:"empresa/branding",loadComponent:()=>import("./chunk-6NNKDC74.js").then(e=>e.BrandingConfigComponent),canActivate:[a,m]},{path:"empresa/smtp",loadComponent:()=>import("./chunk-W7WO3ZQW.js").then(e=>e.SmtpConfigComponent),canActivate:[a,m]},{path:"empresa/integracoes",loadComponent:()=>import("./chunk-6KWKFZDR.js").then(e=>e.ApiLinksConfigComponent),canActivate:[a,m]},{path:"form",loadComponent:()=>import("./chunk-4MOY4DGJ.js").then(e=>e.PublicFormComponent),canActivate:[a]},{path:"empresa-nao-encontrada",loadComponent:()=>import("./chunk-V52JUNB6.js").then(e=>e.CompanyNotFoundComponent)},{path:"**",redirectTo:"/login"}];function q(e,t){return()=>new Promise(o=>{setTimeout(()=>{let n=t.getCurrentCompany();n&&n.brandingConfig&&e.applyCompanyBranding(n),o()},200)})}var Z={providers:[C(),F({eventCoalescing:!0}),H(W),x(),P(()=>E(u.firebase)),T(()=>B()),N(()=>j()),M(()=>O()),{provide:A,useFactory:q,deps:[h,p],multi:!0},{provide:"HTTP_INTERCEPTORS",useClass:d,multi:!0},b(k,z.forRoot({validationMessages:[{name:"required",message:"Este campo \xE9 obrigat\xF3rio"}]}),D),h,p]};var f=class e{subdomainService=i(p);firestoreService=i(U);title=y("Sistema Kanban");ngOnInit(){return s(this,null,function*(){try{let t=yield this.subdomainService.initializeFromSubdomain();t?(this.firestoreService.setCompanyContext(t),this.title.set(`${t.name} - Sistema Kanban`),this.updatePageTitle(t.name)):this.title.set("Sistema Kanban - Login")}catch(t){console.error("\u274C Erro ao inicializar aplica\xE7\xE3o:",t)}})}updatePageTitle(t){typeof document<"u"&&(document.title=`${t} - Sistema Kanban`)}static \u0275fac=function(o){return new(o||e)};static \u0275cmp=S({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(o,n){o&1&&I(0,"router-outlet")},dependencies:[R],encapsulation:2})};u.production&&(console.log=()=>{},console.info=()=>{},console.warn=()=>{});w(f,Z).catch(e=>console.error(e));
