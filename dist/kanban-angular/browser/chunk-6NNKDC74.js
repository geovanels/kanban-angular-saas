import{a as W}from"./chunk-QUQFAB2X.js";import{a as O}from"./chunk-RHNPUN54.js";import{a as A}from"./chunk-4RPGT7VY.js";import{K as R,M as z,j as I,m as L,u as D}from"./chunk-XFXMLSII.js";import{R as j}from"./chunk-4U6ZKXZY.js";import{Ab as t,Bb as n,Cb as g,Jb as x,Lb as u,Lc as U,Nb as _,Sa as E,Ta as l,Tb as F,Ub as f,Xb as o,Zb as w,a as S,ac as B,bb as T,bc as M,cc as V,da as h,f as P,ja as p,ka as c,ta as C,ub as b,vb as v,xb as k,yb as N,zb as y}from"./chunk-O3JLSHCU.js";var G=(a,r)=>r.name;function H(a,r){a&1&&(g(0,"i",51),o(1," Salvando... "))}function J(a,r){a&1&&(g(0,"i",52),o(1," Salvar Configura\xE7\xF5es "))}function K(a,r){if(a&1&&(t(0,"div",4),g(1,"i",53),o(2),n()),a&2){let i=_();l(2),w(" ",i.successMessage()," ")}}function Q(a,r){if(a&1&&(t(0,"div",5),g(1,"i",54),o(2),n()),a&2){let i=_();l(2),w(" ",i.errorMessage()," ")}}function X(a,r){if(a&1&&g(0,"img",15),a&2){let i=_();y("src",i.logoUrl(),E)}}function Y(a,r){a&1&&(t(0,"div",16),g(1,"i",55),n())}function Z(a,r){if(a&1&&(g(0,"img",56),t(1,"p",57),o(2,"Clique para alterar o logo"),n()),a&2){let i=_();y("src",i.logoUrl(),E)}}function $(a,r){a&1&&(g(0,"i",58),t(1,"p",57),o(2,"Clique para fazer upload do logo"),n(),t(3,"p",41),o(4,"PNG, JPG ou SVG - M\xE1x. 5MB"),n())}function ee(a,r){if(a&1){let i=x();t(0,"button",59),u("click",function(){p(i);let d=_();return c(d.removeLogo())}),g(1,"i",60),o(2," Remover Logo "),n()}}function te(a,r){if(a&1){let i=x();t(0,"button",61),u("click",function(){let d=p(i).$implicit,m=_();return c(m.applyColorPreset(d))}),n()}if(a&2){let i=r.$implicit;f("background-color",i.primary),y("title",i.name)}}var q=class a{companyService=h(j);subdomainService=h(z);brandingService=h(W);currentCompany=C(null);primaryColor=C("#3B82F6");secondaryColor=C("#6B7280");logoUrl=C("");companyName=C("");isSaving=C(!1);successMessage=C(null);errorMessage=C(null);colorPresets=[{name:"Azul",primary:"#3B82F6",secondary:"#6B7280"},{name:"Verde",primary:"#10B981",secondary:"#6B7280"},{name:"Vermelho",primary:"#EF4444",secondary:"#6B7280"},{name:"Roxo",primary:"#8B5CF6",secondary:"#6B7280"},{name:"Laranja",primary:"#F59E0B",secondary:"#6B7280"},{name:"Rosa",primary:"#EC4899",secondary:"#6B7280"}];ngOnInit(){this.loadCurrentBranding()}loadCurrentBranding(){let r=this.subdomainService.getCurrentCompany();r&&(this.currentCompany.set(r),this.primaryColor.set(r.brandingConfig?.primaryColor||"#3B82F6"),this.secondaryColor.set(r.brandingConfig?.secondaryColor||"#6B7280"),this.logoUrl.set(r.brandingConfig?.logo||""),this.companyName.set(r.name||""))}saveConfiguration(){return P(this,null,function*(){let r=this.currentCompany();if(!r){this.showError("Empresa n\xE3o encontrada");return}this.isSaving.set(!0),this.clearMessages();try{let i={name:this.companyName(),brandingConfig:{primaryColor:this.primaryColor(),secondaryColor:this.secondaryColor(),logo:this.logoUrl(),favicon:r.brandingConfig?.favicon||"",customCSS:r.brandingConfig?.customCSS||"",companyName:this.companyName()}};yield this.companyService.updateCompany(r.id,i);let e=S(S({},r),i);this.subdomainService.setCurrentCompany(e),this.currentCompany.set(e),yield this.brandingService.updateColors({primaryColor:this.primaryColor(),secondaryColor:this.secondaryColor()}),this.showSuccess("Configura\xE7\xF5es de branding salvas com sucesso!")}catch(i){console.error("Erro ao salvar configura\xE7\xF5es de branding:",i),this.showError("Erro ao salvar configura\xE7\xF5es. Tente novamente.")}finally{this.isSaving.set(!1)}})}onLogoSelected(r){let i=r.target.files[0];if(i){let e=new FileReader;e.onload=d=>{this.logoUrl.set(d.target?.result)},e.readAsDataURL(i)}}removeLogo(){confirm("Tem certeza que deseja remover o logo?")&&this.logoUrl.set("")}applyColorPreset(r){this.primaryColor.set(r.primary),this.secondaryColor.set(r.secondary),this.applyPreviewColors()}resetColors(){this.primaryColor.set("#3B82F6"),this.secondaryColor.set("#6B7280")}getContrastColor(r){if(!r)return"#000000";let i=r.replace("#",""),e=parseInt(i.substr(0,2),16),d=parseInt(i.substr(2,2),16),m=parseInt(i.substr(4,2),16);return(.299*e+.587*d+.114*m)/255>.5?"#000000":"#FFFFFF"}applyBrandingToPage(){document.documentElement.style.setProperty("--primary-color",this.primaryColor()),document.documentElement.style.setProperty("--secondary-color",this.secondaryColor())}applyPreviewColors(){this.brandingService.updateColors({primaryColor:this.primaryColor(),secondaryColor:this.secondaryColor()}).catch(r=>{this.applyBrandingToPage()})}showSuccess(r){this.successMessage.set(r),this.errorMessage.set(null),setTimeout(()=>this.successMessage.set(null),5e3)}showError(r){this.errorMessage.set(r),this.successMessage.set(null),setTimeout(()=>this.errorMessage.set(null),5e3)}clearMessages(){this.successMessage.set(null),this.errorMessage.set(null)}static \u0275fac=function(i){return new(i||a)};static \u0275cmp=T({type:a,selectors:[["app-branding-config"]],decls:101,vars:34,consts:[["logoInput",""],["title","Identidade Visual"],[1,"bg-green-500","hover:bg-green-600","text-white","px-4","py-2","rounded-lg","text-sm","font-medium","transition-colors",3,"click","disabled"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8","py-8"],[1,"mb-6","p-4","bg-green-50","border","border-green-200","rounded-lg","text-green-800"],[1,"mb-6","p-4","bg-red-50","border","border-red-200","rounded-lg","text-red-800"],[1,"bg-white","rounded-lg","shadow-sm","border","border-gray-200","mb-8"],[1,"p-6","border-b","border-gray-200"],[1,"text-lg","font-semibold","text-gray-900","flex","items-center"],[1,"fas","fa-eye","text-blue-500","mr-2"],[1,"text-sm","text-gray-600","mt-1"],[1,"p-6"],[1,"border","border-gray-300","rounded-lg","p-6","bg-gray-50"],[1,"flex","items-center","justify-between","p-4","bg-white","rounded","border","border-gray-200","mb-4"],[1,"flex","items-center","space-x-3"],["alt","Logo Preview",1,"h-8","w-auto",3,"src"],[1,"h-8","w-8","bg-gray-300","rounded","flex","items-center","justify-center"],[1,"text-lg","font-semibold"],[1,"flex","space-x-2"],[1,"px-3","py-1","rounded","text-sm","font-medium"],[1,"px-3","py-1","rounded","text-sm","font-medium","text-white"],[1,"bg-white","rounded","border","border-gray-200","p-4"],[1,"font-semibold","mb-2"],[1,"text-gray-600","text-sm","mb-3"],[1,"px-2","py-1","rounded","text-xs","font-medium"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-8"],[1,"bg-white","rounded-lg","shadow-sm","border","border-gray-200"],[1,"fas","fa-image","text-blue-500","mr-2"],[1,"mb-6"],[1,"border-2","border-dashed","border-gray-300","rounded-lg","p-8","text-center","hover:border-blue-400","transition-colors","cursor-pointer",3,"click"],["type","file","accept","image/*",1,"hidden",3,"change"],[1,"space-y-3"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","url","placeholder","https://exemplo.com/logo.png",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","input","ngModel"],[1,"w-full","bg-red-500","hover:bg-red-600","text-white","px-4","py-2","rounded-md","text-sm","font-medium","transition-colors"],[1,"fas","fa-palette","text-blue-500","mr-2"],[1,"p-6","space-y-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"flex","space-x-3"],["type","color",1,"w-12","h-10","border","border-gray-300","rounded","cursor-pointer",3,"input","value"],["type","text","placeholder","#3B82F6",1,"flex-1","px-3","py-2","border","border-gray-300","rounded-md","focus:ring-blue-500","focus:border-blue-500",3,"input","value"],[1,"text-xs","text-gray-500","mt-1"],["type","text","placeholder","#6B7280",1,"flex-1","px-3","py-2","border","border-gray-300","rounded-md","focus:ring-blue-500","focus:border-blue-500",3,"input","value"],[1,"flex","space-x-2","flex-wrap","gap-2"],["type","button",1,"w-8","h-8","rounded-full","border-2","border-white","shadow-sm","hover:scale-110","transition-transform",3,"background-color","title"],[1,"pt-4","border-t","border-gray-200"],["type","button",1,"w-full","bg-gray-500","hover:bg-gray-600","text-white","px-4","py-2","rounded-md","text-sm","font-medium","transition-colors",3,"click"],[1,"fas","fa-undo","mr-1"],[1,"mt-8","bg-white","rounded-lg","shadow-sm","border","border-gray-200"],[1,"fas","fa-building","text-blue-500","mr-2"],["type","text","placeholder","Nome da sua empresa",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","input","ngModel"],[1,"fas","fa-spinner","fa-spin","mr-1"],[1,"fas","fa-save","mr-1"],[1,"fas","fa-check-circle","mr-2"],[1,"fas","fa-exclamation-circle","mr-2"],[1,"fas","fa-image","text-gray-500"],["alt","Logo atual",1,"max-h-20","mx-auto","mb-4",3,"src"],[1,"text-sm","text-gray-600"],[1,"fas","fa-cloud-upload-alt","text-4xl","text-gray-400","mb-4"],[1,"w-full","bg-red-500","hover:bg-red-600","text-white","px-4","py-2","rounded-md","text-sm","font-medium","transition-colors",3,"click"],[1,"fas","fa-trash","mr-1"],["type","button",1,"w-8","h-8","rounded-full","border-2","border-white","shadow-sm","hover:scale-110","transition-transform",3,"click","title"]],template:function(i,e){if(i&1){let d=x();t(0,"app-main-layout")(1,"app-config-header",1)(2,"button",2),u("click",function(){return p(d),c(e.saveConfiguration())}),b(3,H,2,0)(4,J,2,0),n()(),t(5,"div",3),b(6,K,3,1,"div",4),b(7,Q,3,1,"div",5),t(8,"div",6)(9,"div",7)(10,"h3",8),g(11,"i",9),o(12," Preview da Identidade Visual "),n(),t(13,"p",10),o(14,"Veja como ficar\xE1 a apar\xEAncia do sistema"),n()(),t(15,"div",11)(16,"div",12)(17,"div",13)(18,"div",14),b(19,X,1,1,"img",15)(20,Y,2,0,"div",16),t(21,"h2",17),o(22),n()(),t(23,"div",18)(24,"button",19),o(25," Bot\xE3o Secund\xE1rio "),n(),t(26,"button",20),o(27," Bot\xE3o Principal "),n()()(),t(28,"div",21)(29,"h3",22),o(30,"Sample Content"),n(),t(31,"p",23),o(32,"Este \xE9 um exemplo de como o conte\xFAdo aparecer\xE1 com suas cores personalizadas."),n(),t(33,"div",18)(34,"span",24),o(35," Tag Principal "),n(),t(36,"span",24),o(37," Tag Secund\xE1ria "),n()()()()()(),t(38,"div",25)(39,"div",26)(40,"div",7)(41,"h3",8),g(42,"i",27),o(43," Logo da Empresa "),n()(),t(44,"div",11)(45,"div",28)(46,"div",29),u("click",function(){p(d);let s=F(50);return c(s.click())}),b(47,Z,3,1)(48,$,5,0),n(),t(49,"input",30,0),u("change",function(s){return p(d),c(e.onLogoSelected(s))}),n()(),t(51,"div",31)(52,"div")(53,"label",32),o(54,"URL do Logo (opcional)"),n(),t(55,"input",33),V("ngModelChange",function(s){return p(d),M(e.logoUrl,s)||(e.logoUrl=s),c(s)}),u("input",function(s){return p(d),c(e.logoUrl.set(s.target.value))}),n()(),b(56,ee,3,0,"button",34),n()()(),t(57,"div",26)(58,"div",7)(59,"h3",8),g(60,"i",35),o(61," Cores da Empresa "),n()(),t(62,"div",36)(63,"div")(64,"label",37),o(65,"Cor Principal"),n(),t(66,"div",38)(67,"input",39),u("input",function(s){return p(d),e.primaryColor.set(s.target.value),c(e.applyPreviewColors())}),n(),t(68,"input",40),u("input",function(s){return p(d),e.primaryColor.set(s.target.value),c(e.applyPreviewColors())}),n()(),t(69,"p",41),o(70,"Cor principal da interface (bot\xF5es, links, etc.)"),n()(),t(71,"div")(72,"label",37),o(73,"Cor Secund\xE1ria"),n(),t(74,"div",38)(75,"input",39),u("input",function(s){return p(d),e.secondaryColor.set(s.target.value),c(e.applyPreviewColors())}),n(),t(76,"input",42),u("input",function(s){return p(d),e.secondaryColor.set(s.target.value),c(e.applyPreviewColors())}),n()(),t(77,"p",41),o(78,"Cor para elementos secund\xE1rios"),n()(),t(79,"div")(80,"label",37),o(81,"Paletas Sugeridas"),n(),t(82,"div",43),k(83,te,1,3,"button",44,G),n()(),t(85,"div",45)(86,"button",46),u("click",function(){return p(d),c(e.resetColors())}),g(87,"i",47),o(88," Restaurar Cores Padr\xE3o "),n()()()()(),t(89,"div",48)(90,"div",7)(91,"h3",8),g(92,"i",49),o(93," Informa\xE7\xF5es da Empresa "),n()(),t(94,"div",11)(95,"div")(96,"label",37),o(97,"Nome da Empresa"),n(),t(98,"input",50),V("ngModelChange",function(s){return p(d),M(e.companyName,s)||(e.companyName=s),c(s)}),u("input",function(s){return p(d),c(e.companyName.set(s.target.value))}),n(),t(99,"p",41),o(100,"Este nome aparecer\xE1 no cabe\xE7alho do sistema"),n()()()()()()}i&2&&(l(2),y("disabled",e.isSaving()),l(),v(e.isSaving()?3:4),l(3),v(e.successMessage()?6:-1),l(),v(e.errorMessage()?7:-1),l(10),f("background-color",e.primaryColor()),l(2),v(e.logoUrl()?19:20),l(2),f("color",e.getContrastColor(e.primaryColor())),l(),w(" ",e.companyName()||"Nome da Empresa"," "),l(2),f("background-color",e.secondaryColor())("color",e.getContrastColor(e.secondaryColor())),l(2),f("background-color",e.primaryColor()),l(3),f("color",e.primaryColor()),l(5),f("background-color",e.primaryColor()+"20")("color",e.primaryColor()),l(2),f("background-color",e.secondaryColor()+"20")("color",e.secondaryColor()),l(11),v(e.logoUrl()?47:48),l(8),B("ngModel",e.logoUrl),l(),v(e.logoUrl()?56:-1),l(11),y("value",e.primaryColor()),l(),y("value",e.primaryColor()),l(7),y("value",e.secondaryColor()),l(),y("value",e.secondaryColor()),l(7),N(e.colorPresets),l(15),B("ngModel",e.companyName))},dependencies:[U,R,I,L,D,O,A],styles:["[_nghost-%COMP%]{display:block}"]})};export{q as BrandingConfigComponent};
